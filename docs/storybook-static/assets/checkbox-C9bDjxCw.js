import{t as Se,c as je}from"./bundle-mjs-BNe0Xlio.js";import{j as b}from"./jsx-runtime-D_zvdyIk.js";import{C as Be}from"./check-CGhur1t1.js";import{r as a}from"./index-Br2IOmUs.js";import{f as A,N as Fe,b as Ne,E as Ge}from"./empty-BwNtW-GQ.js";import{u as Oe}from"./useControlled-BhWCjR1C.js";import{u as Te}from"./useStableCallback-CgA2ffE5.js";import{u as Q}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{a as qe,v as He}from"./visuallyHidden-BwafneL2.js";import{f as ee,c as ze,a as Le,u as _e,b as $e}from"./LabelableContext-DhTQYAer.js";import{m as Je,u as te}from"./useRenderElement-DBf0zvZM.js";import{u as Z}from"./useBaseUiId-Ds3dA0Bv.js";import{u as Ke}from"./useButton-D8OkA_9h.js";import{u as Ue}from"./FieldItemContext-8VNZ7Au0.js";import{c as We,n as Xe}from"./createBaseUIEventDetails-BfRHIGKf.js";import{u as Ye}from"./useValueChanged-Daifgw_Z.js";import{u as Qe,a as Ze,t as De}from"./useTransitionStatus-H-zITwNf.js";let D=(function(t){return t.checked="data-checked",t.unchecked="data-unchecked",t.indeterminate="data-indeterminate",t.disabled="data-disabled",t.readonly="data-readonly",t.required="data-required",t.valid="data-valid",t.invalid="data-invalid",t.touched="data-touched",t.dirty="data-dirty",t.filled="data-filled",t.focused="data-focused",t})({});function ne(t){return a.useMemo(()=>({checked(i){return t.indeterminate?{}:i?{[D.checked]:""}:{[D.unchecked]:""}},...ee}),[t.indeterminate])}const Ae=a.createContext(void 0);function et(t=!0){const i=a.useContext(Ae);if(i===void 0&&!t)throw new Error(A(3));return i}const ae=a.createContext(void 0);function tt(){const t=a.useContext(ae);if(t===void 0)throw new Error(A(14));return t}const nt="data-parent",at=a.forwardRef(function(i,w){const{checked:H,className:re,defaultChecked:S=!1,disabled:j=!1,id:d,indeterminate:c=!1,inputRef:x,name:B,onCheckedChange:y,parent:o=!1,readOnly:u=!1,render:z,required:f=!1,uncheckedValue:P,value:E,nativeButton:F=!1,...ie}=i,{clearErrors:oe}=ze(),{disabled:se,name:de,setDirty:ce,setFilled:N,setFocused:L,setTouched:le,state:_,validationMode:ue,validityData:fe,shouldValidateOnChange:pe,validation:me}=Le(),he=Ue(),{labelId:ve,controlId:ke,setControlId:I,getDescriptionProps:$}=_e(),e=et(),g=e==null?void 0:e.parent,M=g&&e.allValues,p=se||he.disabled||(e==null?void 0:e.disabled)||j,m=de??B,r=E??m,J=Z(),be=Z();let v=ke;M?v=o?be:`${g.id}-${r}`:d&&(v=d);let G={};M&&(o?G=e.parent.getParentProps():r&&(G=e.parent.getChildProps(r)));const ge=Te(y),{checked:K=H,indeterminate:V=c,onCheckedChange:O,...Ce}=G,k=e==null?void 0:e.value,U=e==null?void 0:e.setValue,W=e==null?void 0:e.defaultValue,T=a.useRef(null),{getButtonProps:xe,buttonRef:ye}=Ke({disabled:p,native:F}),l=(e==null?void 0:e.validation)??me,[n,Pe]=Oe({controlled:r&&k&&!o?k.includes(r):K,default:r&&W&&!o?W.includes(r):S,name:"Checkbox",state:"checked"});Q(()=>{if(I!==Fe)return I(v),()=>{I(void 0)}},[v,e,I,o]),$e({enabled:!e,id:J,commit:l.commit,value:n,controlRef:T,name:m,getValue:()=>n});const C=a.useRef(null),Ee=Ne(x,C,l.inputRef);Q(()=>{C.current&&(C.current.indeterminate=V,n&&N(!0))},[n,V,N]),Ye(n,()=>{e&&!o||(oe(m),N(n),ce(n!==fe.initialValue),pe()?l.commit(n):l.commit(n,!0))});const Ie=Je({checked:n,disabled:p,name:o?void 0:m,id:F?void 0:v??void 0,required:f,ref:Ee,style:m?qe:He,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(s){if(s.nativeEvent.defaultPrevented)return;const h=s.target.checked,R=We(Xe,s.nativeEvent);if(O==null||O(h,R),ge(h,R),!R.isCanceled&&(Pe(h),r&&k&&U&&!o)){const Re=h?[...k,r]:k.filter(we=>we!==r);U(Re,R)}},onFocus(){var s;(s=T.current)==null||s.focus()}},E!==void 0?{value:(e?n&&E:E)||""}:Ge,$,e?l.getValidationProps:l.getInputValidationProps),X=M?!!K:n,Y=M&&V||c;a.useEffect(()=>{g&&r&&g.disabledStatesRef.current.set(r,p)},[g,p,r]);const q=a.useMemo(()=>({..._,checked:X,disabled:p,readOnly:u,required:f,indeterminate:Y}),[_,X,p,u,f,Y]),Me=ne(q),Ve=te("span",i,{state:q,ref:[ye,T,w,e==null?void 0:e.registerControlRef],props:[{id:F?v??void 0:J,role:"checkbox","aria-checked":V?"mixed":n,"aria-readonly":u||void 0,"aria-required":f||void 0,"aria-labelledby":ve,[nt]:o?"":void 0,onFocus(){L(!0)},onBlur(){const s=C.current;s&&(le(!0),L(!1),ue==="onBlur"&&l.commit(e?k:s.checked))},onClick(s){var h;u||p||(s.preventDefault(),(h=C.current)==null||h.click())}},$,l.getValidationProps,ie,Ce,xe],stateAttributesMapping:Me});return b.jsxs(ae.Provider,{value:q,children:[Ve,!n&&!e&&m&&!o&&P!==void 0&&b.jsx("input",{type:"hidden",name:m,value:P}),b.jsx("input",{...Ie})]})}),rt=a.forwardRef(function(i,w){const{render:H,className:re,keepMounted:S=!1,...j}=i,d=tt(),c=d.checked||d.indeterminate,{transitionStatus:x,setMounted:B}=Qe(c),y=a.useRef(null),o=a.useMemo(()=>({...d,transitionStatus:x}),[d,x]);Ze({open:c,ref:y,onComplete(){c||B(!1)}});const u=ne(d),z=a.useMemo(()=>({...u,...De,...ee}),[u]),f=S||c,P=te("span",i,{enabled:f,ref:[w,y],state:o,stateAttributesMapping:z,props:j});return f?P:null});function it(...t){return Se(je(t))}function Pt({className:t,...i}){return b.jsx(at,{"data-slot":"checkbox",className:it("border-input dark:bg-input/30 data-checked:bg-primary data-checked:text-primary-foreground dark:data-checked:bg-primary data-checked:border-primary aria-invalid:aria-checked:border-primary aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 flex size-4 items-center justify-center rounded-[4px] border shadow-xs transition-shadow group-has-disabled/field:opacity-50 focus-visible:ring-3 aria-invalid:ring-3 peer relative shrink-0 outline-none after:absolute after:-inset-x-3 after:-inset-y-2 disabled:cursor-not-allowed disabled:opacity-50",t),...i,children:b.jsx(rt,{"data-slot":"checkbox-indicator",className:"[&>svg]:size-3.5 grid place-content-center text-current transition-none",children:b.jsx(Be,{})})})}export{Pt as C};
