import{r as b}from"./index-B1jiiJTD.js";import{u as c}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{u as h}from"./useStableCallback-CgA2ffE5.js";import{r as n}from"./index-Br2IOmUs.js";import{N as t,f as E,E as V}from"./empty-BwNtW-GQ.js";let g=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const C={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},F={valid(e){return e===null?null:e?{[g.valid]:""}:{[g.invalid]:""}}},I=n.createContext({invalid:void 0,name:void 0,validityData:{state:C,errors:[],error:"",value:"",initialValue:null},setValidityData:t,disabled:void 0,touched:!1,setTouched:t,dirty:!1,setDirty:t,filled:!1,setFilled:t,focused:!1,setFocused:t,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=V)=>e,getInputValidationProps:(e=V)=>e,inputRef:{current:null},commit:async()=>{}}});function M(e=!0){const a=n.useContext(I);if(a.setValidityData===t&&!e)throw new Error(E(28));return a}function R(e,a){return{...e,state:{...e.state,valid:!a&&e.state.valid}}}const T=n.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:t,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function D(){return n.useContext(T)}function _(e){const{enabled:a=!0,value:r,id:i,name:m,controlRef:v,commit:u}=e,{formRef:d}=D(),{invalid:p,markedDirtyRef:x,validityData:f,setValidityData:y}=M(),o=h(e.getValue);c(()=>{if(!a)return;let l=r;l===void 0&&(l=o()),f.initialValue===null&&l!==null&&y(s=>({...s,initialValue:l}))},[a,y,r,f.initialValue,o]),c(()=>{!a||!i||d.current.fields.set(i,{getValue:o,name:m,controlRef:v,validityData:R(f,p),validate(l=!0){let s=r;s===void 0&&(s=o()),x.current=!0,l?b.flushSync(()=>u(s)):u(s)}})},[u,v,a,d,o,i,p,x,m,f,r]),c(()=>{const l=d.current.fields;return()=>{i&&l.delete(i)}},[d,i])}const L=n.createContext({controlId:void 0,setControlId:t,labelId:void 0,setLabelId:t,messageIds:[],setMessageIds:t,getDescriptionProps:e=>e});function N(){return n.useContext(L)}export{M as a,_ as b,D as c,F as f,N as u};
