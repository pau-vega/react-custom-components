import{r as d}from"./index-Br2IOmUs.js";import{a as w}from"./floating-ui.utils.dom-BR__G8pa.js";import{u as P}from"./useStableCallback-CgA2ffE5.js";import{u as N}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{f as T}from"./empty-BwNtW-GQ.js";import{m as K,a as g}from"./useRenderElement-DBf0zvZM.js";const R=d.createContext(void 0);function x(n=!1){const t=d.useContext(R);if(t===void 0&&!n)throw new Error(T(16));return t}function M(n){const{focusableWhenDisabled:t,disabled:u,composite:f=!1,tabIndex:e=0,isNativeButton:r}=n,c=f&&t!==!1,l=f&&t===!1;return{props:d.useMemo(()=>{const a={onKeyDown(b){u&&t&&b.key!=="Tab"&&b.preventDefault()}};return f||(a.tabIndex=e,!r&&u&&(a.tabIndex=t?e:-1)),(r&&(t||c)||!r&&u)&&(a["aria-disabled"]=u),r&&(!t||l)&&(a.disabled=u),a},[f,u,t,c,l,r,e])}}function j(n={}){const{disabled:t=!1,focusableWhenDisabled:u,tabIndex:f=0,native:e=!0}=n,r=d.useRef(null),c=x(!0)!==void 0,l=P(()=>{const s=r.current;return!!((s==null?void 0:s.tagName)==="A"&&(s!=null&&s.href))}),{props:p}=M({focusableWhenDisabled:u,disabled:t,composite:c,tabIndex:f,isNativeButton:e}),a=d.useCallback(()=>{const s=r.current;U(s)&&c&&t&&p.disabled===void 0&&s.disabled&&(s.disabled=!1)},[t,p.disabled,c]);N(a,[a]);const b=d.useCallback((s={})=>{const{onClick:i,onMouseDown:m,onKeyUp:D,onKeyDown:y,onPointerDown:C,...h}=s;return K({type:e?"button":void 0,onClick(o){if(t){o.preventDefault();return}i==null||i(o)},onMouseDown(o){t||m==null||m(o)},onKeyDown(o){if(t||(g(o),y==null||y(o)),o.baseUIHandlerPrevented)return;const k=o.target===o.currentTarget&&!e&&!l()&&!t,E=o.key==="Enter",B=o.key===" ";k&&((B||E)&&o.preventDefault(),E&&(i==null||i(o)))},onKeyUp(o){t||(g(o),D==null||D(o)),!o.baseUIHandlerPrevented&&o.target===o.currentTarget&&!e&&!t&&o.key===" "&&(i==null||i(o))},onPointerDown(o){if(t){o.preventDefault();return}C==null||C(o)}},e?void 0:{role:"button"},p,h)},[t,p,e,l]),I=P(s=>{r.current=s,a()});return{getButtonProps:b,buttonRef:I}}function U(n){return w(n)&&n.tagName==="BUTTON"}export{R as C,x as a,j as u};
