import{r as m}from"./index-Br2IOmUs.js";import{u as h}from"./useStableCallback-CgA2ffE5.js";import{r as g}from"./index-B1jiiJTD.js";import{u as p,A as d}from"./useAnimationFrame-BGZzLPhQ.js";import{u as A}from"./useIsoLayoutEffect-B3i3ZXBb.js";function y(t){return t==null?t:"current"in t?t.current:t}let S=(function(t){return t.startingStyle="data-starting-style",t.endingStyle="data-ending-style",t})({});const O={[S.startingStyle]:""},C={[S.endingStyle]:""},T={transitionStatus(t){return t==="starting"?O:t==="ending"?C:null}};function v(t,s=!1,u=!0){const n=p();return h((r,e=null)=>{n.cancel();function o(){g.flushSync(r)}const i=y(t);if(i==null)return;const c=i;if(typeof c.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED)r();else{let b=function(){const a=S.startingStyle;if(!c.hasAttribute(a)){n.request(l);return}const f=new MutationObserver(()=>{c.hasAttribute(a)||(f.disconnect(),l())});f.observe(c,{attributes:!0,attributeFilter:[a]}),e==null||e.addEventListener("abort",()=>f.disconnect(),{once:!0})},l=function(){Promise.all(c.getAnimations().map(a=>a.finished)).then(()=>{e!=null&&e.aborted||o()}).catch(()=>{const a=c.getAnimations();if(u){if(e!=null&&e.aborted)return;o()}else a.length>0&&a.some(f=>f.pending||f.playState!=="finished")&&l()})};if(s){b();return}n.request(l)}})}function _(t){const{enabled:s=!0,open:u,ref:n,onComplete:r}=t,e=h(r),o=v(n,u,!1);m.useEffect(()=>{if(!s)return;const i=new AbortController;return o(e,i.signal),()=>{i.abort()}},[s,u,e,o])}function x(t,s=!1,u=!1){const[n,r]=m.useState(t&&s?"idle":void 0),[e,o]=m.useState(t);return t&&!e&&(o(!0),r("starting")),!t&&e&&n!=="ending"&&!u&&r("ending"),!t&&!e&&n==="ending"&&r(void 0),A(()=>{if(!t&&e&&n!=="ending"&&u){const i=d.request(()=>{r("ending")});return()=>{d.cancel(i)}}},[t,e,n,u]),A(()=>{if(!t||s)return;const i=d.request(()=>{r(void 0)});return()=>{d.cancel(i)}},[s,t]),A(()=>{if(!t||!s)return;t&&e&&n!=="idle"&&r("starting");const i=d.request(()=>{r("idle")});return()=>{d.cancel(i)}},[s,t,e,r,n]),m.useMemo(()=>({mounted:e,setMounted:o,transitionStatus:n}),[e,n])}export{S as T,_ as a,v as b,y as r,T as t,x as u};
