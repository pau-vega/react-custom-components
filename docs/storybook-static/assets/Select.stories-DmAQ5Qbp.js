import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{t as ro,c as so}from"./bundle-mjs-BNe0Xlio.js";import{C as kt}from"./chevron-down-B5IqHC-Q.js";import{C as lo}from"./check-CGhur1t1.js";import{C as io}from"./chevron-up-Ps1SdQdB.js";import{r as o}from"./index-Br2IOmUs.js";import{a as ao,v as co}from"./visuallyHidden-BwafneL2.js";import{f as $e,u as uo,b as zt,a as It,E as po}from"./empty-BwNtW-GQ.js";import{c as pt,h as fo,a as Ue,d as mo,f as ft,u as go,e as ho,g as xo,b as ct,r as So}from"./resolveValueLabel-BLnlU7Qw.js";import{u as wt}from"./useControlled-BhWCjR1C.js";import{u as xe}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{u as Me}from"./useStableCallback-CgA2ffE5.js";import{u as ht}from"./useValueAsRef-uCcb0GiG.js";import{c as vo,a as Wt,b as bo,u as Io,f as wo}from"./LabelableContext-DhTQYAer.js";import{u as _t}from"./useLabelableId-BJBp94oK.js";import{u as xt,a as lt,t as qt}from"./useTransitionStatus-H-zITwNf.js";import{f as V,k as f,l as yo,b as Ro,S as To}from"./useInteractions-DLoJm_bm.js";import{c as Ae,n as St,f as Mo,o as Ao,d as Co,w as Eo,j as ut}from"./createBaseUIEventDetails-BfRHIGKf.js";import{u as Po}from"./useValueChanged-Daifgw_Z.js";import{u as Vo}from"./useOpenInteractionType-DABt_JZJ.js";import{u as jo}from"./useFloatingRootContext-Czq2kyX1.js";import{u as No}from"./useClick-TS9p-E59.js";import{u as Ho}from"./useListNavigation-B0MKivMs.js";import{u as Lo}from"./useTypeahead-D1TfG5s2.js";import{m as Yt,u as Se}from"./useRenderElement-DBf0zvZM.js";import{o as mt}from"./owner-CQsS7OFZ.js";import{u as Le}from"./useTimeout-DEENwbcq.js";import{p as Do,t as Uo,m as Bo,q as Oo,k as Gt}from"./popupStateMapping-B2J1S55N.js";import{g as Fo}from"./getPseudoElementBounds-L0mGlMFL.js";import{u as $t}from"./useButton-D8OkA_9h.js";import{g as ko,d as dt}from"./element-vmEcGomw.js";import{i as zo}from"./inertValue-Cg075CKc.js";import{u as Wo,I as _o,F as qo}from"./InternalBackdrop-IVVNL8k2.js";import{C as Yo}from"./CompositeList-qs3wigw5.js";import{u as Go,g as $o}from"./getDisabledMountTransitionStyles-xn1qLHjW.js";import{r as Xo}from"./index-B1jiiJTD.js";import{e as Ko}from"./detectBrowser-Cp-v3zjv.js";import{u as Jo}from"./useAnimationFrame-BGZzLPhQ.js";import{s as gt}from"./styles-D8L7EEBt.js";import{u as Zo}from"./ToolbarRootContext-Dqmc35tY.js";import{C as Qo}from"./composite-CCzA221R.js";import{u as en,c as tn}from"./CSPContext-ClUuNkZd.js";import{g as yt}from"./floating-ui.utils.dom-BR__G8pa.js";import{u as on,I as nn}from"./useCompositeListItem-2W6IGSyp.js";import{u as rn}from"./useBaseUiId-Ds3dA0Bv.js";import"./createLucideIcon-0w86QR-M.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./event-D_tFMKDJ.js";import"./constants-CRqqCNE_.js";import"./composite-RvPlRQ7I.js";import"./floating-ui.utils-CkpHT9gb.js";import"./useOnMount-J4hPCZ9b.js";import"./DirectionContext-DcsIbjZ7.js";import"./index-CGqftQ-p.js";const Xt=o.createContext(null),Kt=o.createContext(null);function we(){const e=o.useContext(Xt);if(e===null)throw new Error($e(60));return e}function Jt(){const e=o.useContext(Kt);if(e===null)throw new Error($e(61));return e}const d={id:V(e=>e.id),modal:V(e=>e.modal),multiple:V(e=>e.multiple),items:V(e=>e.items),itemToStringLabel:V(e=>e.itemToStringLabel),itemToStringValue:V(e=>e.itemToStringValue),isItemEqualToValue:V(e=>e.isItemEqualToValue),value:V(e=>e.value),hasSelectedValue:V(e=>{const{value:t,multiple:i,itemToStringValue:b}=e;return t==null?!1:i&&Array.isArray(t)?t.length>0:Ue(t,b)!==""}),hasNullItemLabel:V((e,t)=>t?fo(e.items):!1),open:V(e=>e.open),mounted:V(e=>e.mounted),forceMount:V(e=>e.forceMount),transitionStatus:V(e=>e.transitionStatus),openMethod:V(e=>e.openMethod),activeIndex:V(e=>e.activeIndex),selectedIndex:V(e=>e.selectedIndex),isActive:V((e,t)=>e.activeIndex===t),isSelected:V((e,t,i)=>{const b=e.isItemEqualToValue,S=e.value;return e.multiple?Array.isArray(S)&&S.some(a=>pt(a,i,b)):e.selectedIndex===t&&e.selectedIndex!==null?!0:pt(S,i,b)}),isSelectedByFocus:V((e,t)=>e.selectedIndex===t),popupProps:V(e=>e.popupProps),triggerProps:V(e=>e.triggerProps),triggerElement:V(e=>e.triggerElement),positionerElement:V(e=>e.positionerElement),listElement:V(e=>e.listElement),scrollUpArrowVisible:V(e=>e.scrollUpArrowVisible),scrollDownArrowVisible:V(e=>e.scrollDownArrowVisible),hasScrollArrows:V(e=>e.hasScrollArrows)};function sn(e){const{id:t,value:i,defaultValue:b=null,onValueChange:S,open:a,defaultOpen:c=!1,onOpenChange:u,name:m,disabled:D=!1,readOnly:x=!1,required:j=!1,modal:h=!0,actionsRef:B,inputRef:W,onOpenChangeComplete:I,items:O,multiple:g=!1,itemToStringLabel:$,itemToStringValue:s,isItemEqualToValue:F=mo,highlightItemOnHover:oe=!0,children:me}=e,{clearErrors:K}=vo(),{setDirty:N,setTouched:X,setFocused:ne,shouldValidateOnChange:k,validityData:_,setFilled:C,name:y,disabled:Q,validation:P,validationMode:J}=Wt(),r=_t({id:t}),T=Q||D,R=y??m,[l,ce]=wt({controlled:i,default:g?b??It:b,name:"Select",state:"value"}),[M,E]=wt({controlled:a,default:c,name:"Select",state:"open"}),H=o.useRef([]),p=o.useRef([]),U=o.useRef(null),re=o.useRef(null),ye=o.useRef(0),A=o.useRef(null),q=o.useRef([]),z=o.useRef(!1),se=o.useRef(!1),ve=o.useRef(null),te=o.useRef({allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}),Z=o.useRef(!1),{mounted:Y,setMounted:ue,transitionStatus:G}=xt(M),{openMethod:ee,triggerProps:de,reset:Ce}=Vo(M),w=uo(()=>new To({id:r,modal:h,multiple:g,itemToStringLabel:$,itemToStringValue:s,isItemEqualToValue:F,value:l,open:M,mounted:Y,transitionStatus:G,items:O,forceMount:!1,openMethod:null,activeIndex:null,selectedIndex:null,popupProps:{},triggerProps:{},triggerElement:null,positionerElement:null,listElement:null,scrollUpArrowVisible:!1,scrollDownArrowVisible:!1,hasScrollArrows:!1})).current,ge=f(w,d.activeIndex),pe=f(w,d.selectedIndex),Re=f(w,d.triggerElement),Ee=f(w,d.positionerElement),Pe=o.useMemo(()=>g&&Array.isArray(l)&&l.length===0?"":Ue(l,s),[g,l,s]),Te=o.useMemo(()=>g&&Array.isArray(l)?l.map(v=>Ue(v,s)):Ue(l,s),[g,l,s]),De=ht(w.state.triggerElement);bo({id:r,commit:P.commit,value:l,controlRef:De,name:R,getValue:()=>Te});const be=o.useRef(l);xe(()=>{l!==be.current&&w.set("forceMount",!0)},[w,l]),xe(()=>{C(g?Array.isArray(l)&&l.length>0:l!=null)},[g,l,C]),xe(function(){if(M)return;const L=q.current;if(g){const he=Array.isArray(l)?l:[];if(he.length===0){w.set("selectedIndex",null);return}const fe=he[he.length-1],Ve=ft(L,fe,F);w.set("selectedIndex",Ve===-1?null:Ve);return}const ie=ft(L,l,F);w.set("selectedIndex",ie===-1?null:ie)},[g,M,l,q,F,w]),Po(l,()=>{K(R),N(l!==_.initialValue),k()?P.commit(l):P.commit(l,!0)});const Oe=Me((v,L)=>{if(u==null||u(v,L),!L.isCanceled&&(E(v),!v&&(L.reason===Mo||L.reason===Ao)&&(X(!0),ne(!1),J==="onBlur"&&P.commit(l)),!v&&w.state.activeIndex!==null)){const ie=H.current[w.state.activeIndex];queueMicrotask(()=>{ie==null||ie.setAttribute("tabindex","-1")})}}),Fe=Me(()=>{ue(!1),w.set("activeIndex",null),Ce(),I==null||I(!1)});lt({enabled:!B,open:M,ref:U,onComplete(){M||Fe()}}),o.useImperativeHandle(B,()=>({unmount:Fe}),[Fe]);const Ne=Me((v,L)=>{S==null||S(v,L),!L.isCanceled&&ce(v)}),ke=Me(()=>{const v=w.state.listElement||U.current;if(!v)return;const L=v.scrollTop,ie=v.scrollTop+v.clientHeight,he=L>1,fe=ie<v.scrollHeight-1;w.state.scrollUpArrowVisible!==he&&w.set("scrollUpArrowVisible",he),w.state.scrollDownArrowVisible!==fe&&w.set("scrollDownArrowVisible",fe)}),le=jo({open:M,onOpenChange:Oe,elements:{reference:Re,floating:Ee}}),Xe=No(le,{enabled:!x&&!T,event:"mousedown"}),Ke=yo(le,{bubbles:!1}),ze=Ho(le,{enabled:!x&&!T,listRef:H,activeIndex:ge,selectedIndex:pe,disabledIndices:It,onNavigate(v){v===null&&!M||w.set("activeIndex",v)},focusItemOnHover:!1}),Ie=Lo(le,{enabled:!x&&!T&&(M||!g),listRef:p,activeIndex:ge,selectedIndex:pe,onMatch(v){M?w.set("activeIndex",v):Ne(q.current[v],Ae("none"))},onTypingChange(v){z.current=v}}),{getReferenceProps:Je,getFloatingProps:He,getItemProps:We}=Ro([Xe,Ke,ze,Ie]),_e=o.useMemo(()=>Yt(Je(),de,r?{id:r}:po),[Je,de,r]);go(()=>{w.update({popupProps:He(),triggerProps:_e})}),xe(()=>{w.update({id:r,modal:h,multiple:g,value:l,open:M,mounted:Y,transitionStatus:G,popupProps:He(),triggerProps:_e,items:O,itemToStringLabel:$,itemToStringValue:s,isItemEqualToValue:F,openMethod:ee})},[w,r,h,g,l,M,Y,G,He,_e,O,$,s,F,ee]);const it=o.useMemo(()=>({store:w,name:R,required:j,disabled:T,readOnly:x,multiple:g,itemToStringLabel:$,itemToStringValue:s,highlightItemOnHover:oe,setValue:Ne,setOpen:Oe,listRef:H,popupRef:U,scrollHandlerRef:re,handleScrollArrowVisibility:ke,scrollArrowsMountedCountRef:ye,getItemProps:We,events:le.context.events,valueRef:A,valuesRef:q,labelsRef:p,typingRef:z,selectionRef:te,selectedItemTextRef:ve,validation:P,onOpenChangeComplete:I,keyboardActiveRef:se,alignItemWithTriggerActiveRef:Z,initialValueRef:be}),[w,R,j,T,x,g,$,s,oe,Ne,Oe,We,le.context.events,P,I,ke]),Ze=zt(W,P.inputRef),Qe=g&&Array.isArray(l)&&l.length>0,at=o.useMemo(()=>!g||!Array.isArray(l)||!R?null:l.map(v=>{const L=Ue(v,s);return n.jsx("input",{type:"hidden",name:R,value:L},L)}),[g,l,R,s]);return n.jsx(Xt.Provider,{value:it,children:n.jsxs(Kt.Provider,{value:le,children:[me,n.jsx("input",{...P.getInputValidationProps({onFocus(){var v;(v=w.state.triggerElement)==null||v.focus({focusVisible:!0})},onChange(v){if(v.nativeEvent.defaultPrevented)return;const L=v.target.value,ie=Ae(St,v.nativeEvent);function he(){if(g)return;const fe=q.current.find(Ve=>Ue(Ve,s).toLowerCase()===L.toLowerCase());fe!=null&&(N(fe!==_.initialValue),Ne(fe,ie),k()&&P.commit(fe))}w.set("forceMount",!0),queueMicrotask(he)}}),name:g?void 0:R,value:Pe,disabled:T,required:j&&!Qe,readOnly:x,ref:Ze,style:R?ao:co,tabIndex:-1,"aria-hidden":!0}),at]})})}const et=2,ln=400,Rt=200,an={...Do,...wo,value:()=>null},cn=o.forwardRef(function(t,i){const{render:b,className:S,id:a,disabled:c=!1,nativeButton:u=!0,...m}=t,{setTouched:D,setFocused:x,validationMode:j,state:h,disabled:B}=Wt(),{labelId:W}=Io(),{store:I,setOpen:O,selectionRef:g,validation:$,readOnly:s,required:F,alignItemWithTriggerActiveRef:oe,disabled:me,keyboardActiveRef:K}=we(),N=B||me||c,X=f(I,d.open),ne=f(I,d.value),k=f(I,d.triggerProps),_=f(I,d.positionerElement),C=f(I,d.listElement),y=f(I,d.id),Q=f(I,d.hasSelectedValue),P=!Q&&X,J=f(I,d.hasNullItemLabel,P),r=a??y;_t({id:r});const T=ht(_),R=o.useRef(null),{getButtonProps:l,buttonRef:ce}=$t({disabled:N,native:u}),M=Me(z=>{I.set("triggerElement",z)}),E=zt(i,R,ce,M),H=Le(),p=Le(),U=Le(),re=Le();o.useEffect(()=>{if(X)return!(Q||J)?U.start(ln,()=>{g.current.allowUnselectedMouseUp=!0,g.current.allowSelectedMouseUp=!0}):re.start(Rt,()=>{g.current.allowUnselectedMouseUp=!0,U.start(Rt,()=>{g.current.allowSelectedMouseUp=!0})}),()=>{U.clear(),re.clear()};g.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1},p.clear()},[X,Q,J,g,p,U,re]);const ye=o.useMemo(()=>{var z;return(C==null?void 0:C.id)??((z=ko(_))==null?void 0:z.id)},[C,_]),A=Yt(k,{id:r,role:"combobox","aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-controls":X?ye:void 0,"aria-labelledby":W,"aria-readonly":s||void 0,"aria-required":F||void 0,tabIndex:N?-1:0,ref:E,onFocus(z){x(!0),X&&oe.current&&O(!1,Ae(St,z.nativeEvent)),H.start(0,()=>{I.set("forceMount",!0)})},onBlur(z){dt(_,z.relatedTarget)||(D(!0),x(!1),j==="onBlur"&&$.commit(ne))},onPointerMove(){K.current=!1},onKeyDown(){K.current=!0},onMouseDown(z){if(X)return;const se=mt(z.currentTarget);function ve(te){if(!R.current)return;const Z=te.target;if(dt(R.current,Z)||dt(T.current,Z)||Z===R.current)return;const Y=Fo(R.current);te.clientX>=Y.left-et&&te.clientX<=Y.right+et&&te.clientY>=Y.top-et&&te.clientY<=Y.bottom+et||O(!1,Ae(Co,te))}p.start(0,()=>{se.addEventListener("mouseup",ve,{once:!0})})}},$.getValidationProps,m,l);A.role="combobox";const q=o.useMemo(()=>({...h,open:X,disabled:N,value:ne,readOnly:s,placeholder:!Q}),[h,X,N,ne,s,Q]);return Se("button",t,{ref:[i,R],state:q,stateAttributesMapping:an,props:A})}),un={value:()=>null},dn=o.forwardRef(function(t,i){const{className:b,render:S,children:a,placeholder:c,...u}=t,{store:m,valueRef:D}=we(),x=f(m,d.value),j=f(m,d.items),h=f(m,d.itemToStringLabel),B=f(m,d.hasSelectedValue),W=!B&&c!=null&&a==null,I=f(m,d.hasNullItemLabel,W),O=o.useMemo(()=>({value:x,placeholder:!B}),[x,B]);let g=null;return typeof a=="function"?g=a(x):a!=null?g=a:!B&&c!=null&&!I?g=c:Array.isArray(x)?g=ho(x,j,h):g=xo(x,j,h),Se("span",t,{state:O,ref:[i,D],props:[{children:g},u],stateAttributesMapping:un})}),pn=o.forwardRef(function(t,i){const{className:b,render:S,...a}=t,{store:c}=we(),u=f(c,d.open),m=o.useMemo(()=>({open:u}),[u]);return Se("span",t,{state:m,ref:i,props:[{"aria-hidden":!0,children:"▼"},a],stateAttributesMapping:Uo})}),fn=o.createContext(void 0),mn=o.forwardRef(function(t,i){const{store:b}=we(),S=f(b,d.mounted),a=f(b,d.forceMount);return S||a?n.jsx(fn.Provider,{value:!0,children:n.jsx(Bo,{ref:i,...t})}):null}),Zt=o.createContext(void 0);function vt(){const e=o.useContext(Zt);if(!e)throw new Error($e(59));return e}function st(e,t){e&&Object.assign(e.style,t)}const Qt={position:"relative",maxHeight:"100%",overflowX:"hidden",overflowY:"auto"},gn={position:"fixed"},hn=o.forwardRef(function(t,i){const{anchor:b,positionMethod:S="absolute",className:a,render:c,side:u="bottom",align:m="center",sideOffset:D=0,alignOffset:x=0,collisionBoundary:j="clipping-ancestors",collisionPadding:h,arrowPadding:B=5,sticky:W=!1,disableAnchorTracking:I,alignItemWithTrigger:O=!0,collisionAvoidance:g=Oo,...$}=t,{store:s,listRef:F,labelsRef:oe,alignItemWithTriggerActiveRef:me,selectedItemTextRef:K,valuesRef:N,initialValueRef:X,popupRef:ne,setValue:k}=we(),_=Jt(),C=f(s,d.open),y=f(s,d.mounted),Q=f(s,d.modal),P=f(s,d.value),J=f(s,d.openMethod),r=f(s,d.positionerElement),T=f(s,d.triggerElement),R=f(s,d.isItemEqualToValue),l=o.useRef(null),ce=o.useRef(null),[M,E]=o.useState(O),H=y&&M&&J!=="touch";!y&&M!==O&&E(O),xe(()=>{y||(d.scrollUpArrowVisible(s.state)&&s.set("scrollUpArrowVisible",!1),d.scrollDownArrowVisible(s.state)&&s.set("scrollDownArrowVisible",!1))},[s,y]),o.useImperativeHandle(me,()=>H),Wo((H||Q)&&C&&J!=="touch",T);const p=Go({anchor:b,floatingRootContext:_,positionMethod:S,mounted:y,side:u,sideOffset:D,align:m,alignOffset:x,arrowPadding:B,collisionBoundary:j,collisionPadding:h,sticky:W,disableAnchorTracking:I??H,collisionAvoidance:g,keepMounted:!0}),U=H?"none":p.side,re=H?gn:p.positionerStyles,ye=o.useMemo(()=>{const Z={};return C||(Z.pointerEvents="none"),{role:"presentation",hidden:!y,style:{...re,...Z}}},[C,y,re]),A=o.useMemo(()=>({open:C,side:U,align:p.align,anchorHidden:p.anchorHidden}),[C,U,p.align,p.anchorHidden]),q=Me(Z=>{s.set("positionerElement",Z)}),z=Se("div",t,{ref:[i,q],state:A,stateAttributesMapping:Gt,props:[ye,$]}),se=o.useRef(0),ve=Me(Z=>{if(Z.size===0&&se.current===0||N.current.length===0)return;const Y=se.current;if(se.current=Z.size,Z.size===Y)return;const ue=Ae(St);if(Y!==0&&!s.state.multiple&&P!==null&&ft(N.current,P,R)===-1){const ee=X.current,Ce=ee!=null&&ct(N.current,ee,R)?ee:null;k(Ce,ue),Ce===null&&(s.set("selectedIndex",null),K.current=null)}if(Y!==0&&s.state.multiple&&Array.isArray(P)){const G=P.filter(ee=>ct(N.current,ee,R));(G.length!==P.length||G.some(ee=>!ct(P,ee,R)))&&(k(G,ue),G.length===0&&(s.set("selectedIndex",null),K.current=null))}if(C&&H){s.update({scrollUpArrowVisible:!1,scrollDownArrowVisible:!1});const G={height:""};st(r,G),st(ne.current,G)}}),te=o.useMemo(()=>({...p,side:U,alignItemWithTriggerActive:H,setControlledAlignItemWithTrigger:E,scrollUpArrowRef:l,scrollDownArrowRef:ce}),[p,U,H,E]);return n.jsx(Yo,{elementsRef:F,labelsRef:oe,onMapChange:ve,children:n.jsxs(Zt.Provider,{value:te,children:[y&&Q&&n.jsx(_o,{inert:zo(!C),cutout:T}),z]})})});function eo(e){const t=e.currentTarget.getBoundingClientRect();return t.top+1<=e.clientY&&e.clientY<=t.bottom-1&&t.left+1<=e.clientX&&e.clientX<=t.right-1}const xn={...Gt,...qt},Sn=o.forwardRef(function(t,i){const{render:b,className:S,...a}=t,{store:c,popupRef:u,onOpenChangeComplete:m,setOpen:D,valueRef:x,selectedItemTextRef:j,keyboardActiveRef:h,multiple:B,handleScrollArrowVisibility:W,scrollHandlerRef:I,highlightItemOnHover:O}=we(),{side:g,align:$,alignItemWithTriggerActive:s,setControlledAlignItemWithTrigger:F,scrollDownArrowRef:oe,scrollUpArrowRef:me}=vt(),K=Zo()!=null,N=Jt(),{nonce:X,disableStyleElements:ne}=en(),k=Le(),_=f(c,d.id),C=f(c,d.open),y=f(c,d.mounted),Q=f(c,d.popupProps),P=f(c,d.transitionStatus),J=f(c,d.triggerElement),r=f(c,d.positionerElement),T=f(c,d.listElement),R=o.useRef(0),l=o.useRef(!1),ce=o.useRef(0),M=o.useRef(!1),E=o.useRef({}),H=Jo(),p=Me(A=>{if(!r||!u.current||!M.current)return;if(l.current||!s){W();return}const q=r.style.top==="0px",z=r.style.bottom==="0px",se=r.getBoundingClientRect().height,ve=mt(r),te=getComputedStyle(r),Z=parseFloat(te.marginTop),Y=parseFloat(te.marginBottom),ue=Tt(getComputedStyle(u.current)),G=ve.documentElement.clientHeight-Z-Y,ee=A.scrollTop,de=A.scrollHeight,Ce=A.clientHeight,w=de-Ce;let ge=0,pe=null,Re=!1;if(q){const Ee=w-ee,Pe=se+Ee,Te=Math.min(Pe,G);ge=Te,Te!==G?pe=w:Re=!0}else if(z){const Ee=ee-0,Pe=se+Ee,Te=Math.min(Pe,G),De=Pe-G;ge=Te,Te!==G?pe=0:(Re=!0,ee<w&&(pe=ee-(Ee-De)))}ge!==0&&(r.style.height=`${ge}px`),pe!=null&&(A.scrollTop=pe),(Re||ge>=ue)&&(l.current=!0),W()});o.useImperativeHandle(I,()=>p,[p]),lt({open:C,ref:u,onComplete(){C&&(m==null||m(!0))}});const U=o.useMemo(()=>({open:C,transitionStatus:P,side:g,align:$}),[C,P,g,$]);xe(()=>{!r||!u.current||Object.keys(E.current).length||(E.current={top:r.style.top||"0",left:r.style.left||"0",right:r.style.right,height:r.style.height,bottom:r.style.bottom,minHeight:r.style.minHeight,maxHeight:r.style.maxHeight,marginTop:r.style.marginTop,marginBottom:r.style.marginBottom})},[u,r]),xe(()=>{C||s||(M.current=!1,l.current=!1,R.current=0,ce.current=0,st(r,E.current))},[C,s,r,u]),xe(()=>{const A=u.current;if(!(!C||!J||!r||!A||c.state.transitionStatus==="ending")){if(!s){M.current=!0,H.request(W),A.style.removeProperty("--transform-origin");return}queueMicrotask(()=>{var z;const q=bn(A);A.style.removeProperty("--transform-origin");try{const se=getComputedStyle(r),ve=getComputedStyle(A),te=mt(J),Z=yt(r),Y=J.getBoundingClientRect(),ue=r.getBoundingClientRect(),G=Y.left,ee=Y.height,de=T||A,Ce=de.scrollHeight,w=parseFloat(ve.borderBottomWidth),ge=parseFloat(se.marginTop)||10,pe=parseFloat(se.marginBottom)||10,Re=parseFloat(se.minHeight)||100,Ee=Tt(ve),Pe=5,Te=5,De=20,be=te.documentElement.clientHeight-ge-pe,Oe=te.documentElement.clientWidth,Fe=be-Y.bottom+ee,Ne=j.current,ke=x.current;let le,Xe=0,Ke=0;if(Ne&&ke){const L=ke.getBoundingClientRect();le=Ne.getBoundingClientRect();const ie=L.left-G,he=le.left-ue.left,fe=L.top-Y.top+L.height/2,Ve=le.top-ue.top+le.height/2;Xe=ie-he,Ke=Ve-fe}const ze=Fe+Ke+pe+w;let Ie=Math.min(be,ze);const Je=be-ge-pe,He=ze-Ie,We=Math.max(Pe,G+Xe),_e=Oe-Te,it=Math.max(0,We+ue.width-_e);r.style.left=`${We-it}px`,r.style.height=`${Ie}px`,r.style.maxHeight="auto",r.style.marginTop=`${ge}px`,r.style.marginBottom=`${pe}px`,A.style.height="100%";const Ze=de.scrollHeight-de.clientHeight,Qe=He>=Ze;Qe&&(Ie=Math.min(be,ue.height)-(He-Ze));const at=Y.top<De||Y.bottom>be-De||Ie<Math.min(Ce,Re),v=(((z=Z.visualViewport)==null?void 0:z.scale)??1)!==1&&Ko;if(at||v){M.current=!0,st(r,E.current),Xo.flushSync(()=>F(!1));return}if(Qe){const L=Math.max(0,be-ze);r.style.top=ue.height>=Je?"0":`${L}px`,r.style.height=`${Ie}px`,de.scrollTop=de.scrollHeight-de.clientHeight,R.current=Math.max(Re,Ie)}else r.style.bottom="0",R.current=Math.max(Re,Ie),de.scrollTop=He;if(le){const L=ue.top,ie=ue.height,he=le.top+le.height/2,fe=ie>0?(he-L)/ie*100:50,Ve=tn(fe,0,100);A.style.setProperty("--transform-origin",`50% ${Ve}%`)}(R.current===be||Ie>=Ee)&&(l.current=!0),W(),setTimeout(()=>{M.current=!0})}finally{q()}})}},[c,C,r,J,x,j,u,W,s,F,H,oe,me,T]),o.useEffect(()=>{if(!s||!r||!C)return;const A=yt(r);function q(z){D(!1,Ae(Eo,z))}return A.addEventListener("resize",q),()=>{A.removeEventListener("resize",q)}},[D,s,r,C]);const re={...T?{role:"presentation","aria-orientation":void 0}:{role:"listbox","aria-multiselectable":B||void 0,id:`${_}-list`},onKeyDown(A){h.current=!0,K&&Qo.has(A.key)&&A.stopPropagation()},onMouseMove(){h.current=!1},onPointerLeave(A){if(!O||eo(A)||A.pointerType==="touch")return;const q=A.currentTarget;k.start(0,()=>{c.set("activeIndex",null),q.focus({preventScroll:!0})})},onScroll(A){var q;T||(q=I.current)==null||q.call(I,A.currentTarget)},...s&&{style:T?{height:"100%"}:Qt}},ye=Se("div",t,{ref:[i,u],state:U,stateAttributesMapping:xn,props:[Q,re,$o(P),{className:!T&&s?gt.className:void 0},a]});return n.jsxs(o.Fragment,{children:[!ne&&gt.getElement(X),n.jsx(qo,{context:N,modal:!1,disabled:!y,restoreFocus:!0,children:ye})]})});function Tt(e){const t=e.maxHeight||"";return t.endsWith("px")&&parseFloat(t)||1/0}const Mt={transform:"none",scale:"1",translate:"0 0"};function vn(e,t,i){i?e.setProperty(t,i):e.removeProperty(t)}function bn(e){const{style:t}=e,i={},b=Object.keys(Mt);for(const S of b)i[S]=t.getPropertyValue(S),t.setProperty(S,Mt[S]);return()=>{for(const S of b)vn(t,S,i[S])}}const In=o.forwardRef(function(t,i){const{className:b,render:S,...a}=t,{store:c,scrollHandlerRef:u}=we(),{alignItemWithTriggerActive:m}=vt(),D=f(c,d.hasScrollArrows),x=f(c,d.openMethod),j=f(c,d.multiple),B={id:`${f(c,d.id)}-list`,role:"listbox","aria-multiselectable":j||void 0,onScroll(I){var O;(O=u.current)==null||O.call(u,I.currentTarget)},...m&&{style:Qt},className:D&&x!=="touch"?gt.className:void 0},W=Me(I=>{c.set("listElement",I)});return Se("div",t,{ref:[i,W],props:[B,a]})}),to=o.createContext(void 0);function bt(){const e=o.useContext(to);if(!e)throw new Error($e(57));return e}const wn=o.memo(o.forwardRef(function(t,i){const{render:b,className:S,value:a=null,label:c,disabled:u=!1,nativeButton:m=!1,...D}=t,x=o.useRef(null),j=on({label:c,textRef:x,indexGuessBehavior:nn.GuessFromOrder}),{store:h,getItemProps:B,setOpen:W,setValue:I,selectionRef:O,typingRef:g,valuesRef:$,keyboardActiveRef:s,multiple:F,highlightItemOnHover:oe}=we(),me=Le(),K=f(h,d.isActive,j.index),N=f(h,d.isSelected,j.index,a),X=f(h,d.isSelectedByFocus,j.index),ne=f(h,d.isItemEqualToValue),k=j.index,_=k!==-1,C=o.useRef(null),y=ht(k);xe(()=>{if(!_)return;const p=$.current;return p[k]=a,()=>{delete p[k]}},[_,k,a,$]),xe(()=>{if(!_)return;const p=h.state.value;let U=p;F&&Array.isArray(p)&&p.length>0&&(U=p[p.length-1]),U!==void 0&&pt(U,a,ne)&&h.set("selectedIndex",k)},[_,k,F,ne,h,a]);const Q=o.useMemo(()=>({disabled:u,selected:N,highlighted:K}),[u,N,K]),P=B({active:K,selected:N});P.onFocus=void 0,P.id=void 0;const J=o.useRef(null),r=o.useRef("mouse"),T=o.useRef(!1),{getButtonProps:R,buttonRef:l}=$t({disabled:u,focusableWhenDisabled:!0,native:m});function ce(p){const U=h.state.value;if(F){const re=Array.isArray(U)?U:[],ye=N?So(re,a,ne):[...re,a];I(ye,Ae(ut,p))}else I(a,Ae(ut,p)),W(!1,Ae(ut,p))}const M={role:"option","aria-selected":N,tabIndex:K?0:-1,onFocus(){h.set("activeIndex",k)},onMouseEnter(){!s.current&&h.state.selectedIndex===null&&h.set("activeIndex",k)},onMouseMove(){oe&&h.set("activeIndex",k)},onMouseLeave(p){!oe||s.current||eo(p)||me.start(0,()=>{h.state.activeIndex===k&&h.set("activeIndex",null)})},onTouchStart(){O.current={allowSelectedMouseUp:!1,allowUnselectedMouseUp:!1}},onKeyDown(p){J.current=p.key,h.set("activeIndex",k)},onClick(p){T.current=!1,!(p.type==="keydown"&&J.current===null)&&(u||J.current===" "&&g.current||r.current!=="touch"&&!K||(J.current=null,ce(p.nativeEvent)))},onPointerEnter(p){r.current=p.pointerType},onPointerDown(p){r.current=p.pointerType,T.current=!0},onMouseUp(p){if(u)return;if(T.current){T.current=!1;return}const U=!O.current.allowSelectedMouseUp&&N,re=!O.current.allowUnselectedMouseUp&&!N;U||re||r.current!=="touch"&&!K||ce(p.nativeEvent)}},E=Se("div",t,{ref:[l,i,j.ref,C],state:Q,props:[P,M,D,R]}),H=o.useMemo(()=>({selected:N,indexRef:y,textRef:x,selectedByFocus:X,hasRegistered:_}),[N,y,x,X,_]);return n.jsx(to.Provider,{value:H,children:E})})),yn=o.forwardRef(function(t,i){const b=t.keepMounted??!1,{selected:S}=bt();return b||S?n.jsx(Rn,{...t,ref:i}):null}),Rn=o.memo(o.forwardRef((e,t)=>{const{render:i,className:b,keepMounted:S,...a}=e,{selected:c}=bt(),u=o.useRef(null),{transitionStatus:m,setMounted:D}=xt(c),x=o.useMemo(()=>({selected:c,transitionStatus:m}),[c,m]),j=Se("span",e,{ref:[t,u],state:x,props:[{"aria-hidden":!0,children:"✔️"},a],stateAttributesMapping:qt});return lt({open:c,ref:u,onComplete(){c||D(!1)}}),j})),Tn=o.memo(o.forwardRef(function(t,i){const{indexRef:b,textRef:S,selectedByFocus:a,hasRegistered:c}=bt(),{selectedItemTextRef:u}=we(),{className:m,render:D,...x}=t,j=o.useCallback(B=>{if(!B||!c)return;const W=u.current===null||!u.current.isConnected;(a||W&&b.current===0)&&(u.current=B)},[u,b,a,c]);return Se("div",t,{ref:[j,i,S],props:x})})),oo=o.forwardRef(function(t,i){const{render:b,className:S,direction:a,keepMounted:c=!1,...u}=t,{store:m,popupRef:D,listRef:x,handleScrollArrowVisibility:j,scrollArrowsMountedCountRef:h}=we(),{side:B,scrollDownArrowRef:W,scrollUpArrowRef:I}=vt(),O=a==="up"?d.scrollUpArrowVisible:d.scrollDownArrowVisible,g=f(m,O),$=f(m,d.openMethod),s=g&&$!=="touch",F=Le(),oe=a==="up"?I:W,{transitionStatus:me,setMounted:K}=xt(s);xe(()=>(h.current+=1,m.state.hasScrollArrows||m.set("hasScrollArrows",!0),()=>{h.current=Math.max(0,h.current-1),h.current===0&&m.state.hasScrollArrows&&m.set("hasScrollArrows",!1)}),[m,h]),lt({open:s,ref:oe,onComplete(){s||K(!1)}});const N=o.useMemo(()=>({direction:a,visible:s,side:B,transitionStatus:me}),[a,s,B,me]),ne=Se("div",t,{ref:[i,oe],state:N,props:[{"aria-hidden":!0,children:a==="up"?"▲":"▼",style:{position:"absolute"},onMouseMove(_){if(_.movementX===0&&_.movementY===0||F.isStarted())return;m.set("activeIndex",null);function C(){var r;const y=m.state.listElement??D.current;if(!y)return;m.set("activeIndex",null),j();const Q=y.scrollTop===0,P=Math.round(y.scrollTop+y.clientHeight)>=y.scrollHeight;if(x.current.length===0&&(a==="up"?m.set("scrollUpArrowVisible",!Q):m.set("scrollDownArrowVisible",!P)),a==="up"&&Q||a==="down"&&P){F.clear();return}if((m.state.listElement||D.current)&&x.current&&x.current.length>0){const T=x.current,R=((r=oe.current)==null?void 0:r.offsetHeight)||0;if(a==="up"){let l=0;const ce=y.scrollTop+R;for(let E=0;E<T.length;E+=1){const H=T[E];if(H&&H.offsetTop>=ce){l=E;break}}const M=Math.max(0,l-1);if(M<l){const E=T[M];E&&(y.scrollTop=Math.max(0,E.offsetTop-R))}else y.scrollTop=0}else{let l=T.length-1;const ce=y.scrollTop+y.clientHeight-R;for(let E=0;E<T.length;E+=1){const H=T[E];if(H&&H.offsetTop+H.offsetHeight>ce){l=Math.max(0,E-1);break}}const M=Math.min(T.length-1,l+1);if(M>l){const E=T[M];E&&(y.scrollTop=E.offsetTop+E.offsetHeight-y.clientHeight+R)}else y.scrollTop=y.scrollHeight-y.clientHeight}}F.start(40,C)}F.start(40,C)},onMouseLeave(){F.clear()}},u]});return s||c?ne:null}),Mn=o.forwardRef(function(t,i){return n.jsx(oo,{...t,ref:i,direction:"down"})}),An=o.forwardRef(function(t,i){return n.jsx(oo,{...t,ref:i,direction:"up"})}),no=o.createContext(void 0);function Cn(){const e=o.useContext(no);if(e===void 0)throw new Error($e(56));return e}const En=o.forwardRef(function(t,i){const{className:b,render:S,...a}=t,[c,u]=o.useState(),m=o.useMemo(()=>({labelId:c,setLabelId:u}),[c,u]),D=Se("div",t,{ref:i,props:[{role:"group","aria-labelledby":c},a]});return n.jsx(no.Provider,{value:m,children:D})}),Pn=o.forwardRef(function(t,i){const{className:b,render:S,id:a,...c}=t,{setLabelId:u}=Cn(),m=rn(a);return xe(()=>{u(m)},[m,u]),Se("div",t,{ref:i,props:[{id:m},c]})});function je(...e){return ro(so(e))}var Be=sn;function At({className:e,...t}){return n.jsx(En,{"data-slot":"select-group",className:je("scroll-my-1 p-1",e),...t})}function qe({className:e,...t}){return n.jsx(dn,{"data-slot":"select-value",className:je("flex flex-1 text-left",e),...t})}function Ye({className:e,size:t="default",children:i,...b}){return n.jsxs(cn,{"data-slot":"select-trigger","data-size":t,className:je("border-input data-placeholder:text-muted-foreground dark:bg-input/30 dark:hover:bg-input/50 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 gap-1.5 rounded-md border bg-transparent py-2 pr-2 pl-2.5 text-sm shadow-xs transition-[color,box-shadow] focus-visible:ring-3 aria-invalid:ring-3 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:gap-1.5 [&_svg:not([class*='size-'])]:size-4 flex w-fit items-center justify-between whitespace-nowrap outline-none disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...b,children:[i,n.jsx(pn,{render:n.jsx(kt,{className:"text-muted-foreground size-4 pointer-events-none"})})]})}function Ge({className:e,children:t,side:i="bottom",sideOffset:b=4,align:S="center",alignOffset:a=0,alignItemWithTrigger:c=!0,...u}){return n.jsx(mn,{children:n.jsx(hn,{side:i,sideOffset:b,align:S,alignOffset:a,alignItemWithTrigger:c,className:"isolate z-50",children:n.jsxs(Sn,{"data-slot":"select-content","data-align-trigger":c,className:je("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 min-w-36 rounded-md shadow-md ring-1 duration-100 data-[side=inline-start]:slide-in-from-right-2 data-[side=inline-end]:slide-in-from-left-2 relative isolate z-50 max-h-(--available-height) w-(--anchor-width) origin-(--transform-origin) overflow-x-hidden overflow-y-auto data-[align-trigger=true]:animate-none",e),...u,children:[n.jsx(Vn,{}),n.jsx(In,{children:t}),n.jsx(jn,{})]})})})}function Ct({className:e,...t}){return n.jsx(Pn,{"data-slot":"select-label",className:je("text-muted-foreground px-2 py-1.5 text-xs",e),...t})}function ae({className:e,children:t,...i}){return n.jsxs(wn,{"data-slot":"select-item",className:je("focus:bg-accent focus:text-accent-foreground not-data-[variant=destructive]:focus:**:text-accent-foreground gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 relative flex w-full cursor-default items-center outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...i,children:[n.jsx(Tn,{className:"flex flex-1 gap-2 shrink-0 whitespace-nowrap",children:t}),n.jsx(yn,{render:n.jsx("span",{className:"pointer-events-none absolute right-2 flex size-4 items-center justify-center"}),children:n.jsx(lo,{className:"pointer-events-none"})})]})}function Vn({className:e,...t}){return n.jsx(An,{"data-slot":"select-scroll-up-button",className:je("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 top-0 w-full",e),...t,children:n.jsx(io,{})})}function jn({className:e,...t}){return n.jsx(Mn,{"data-slot":"select-scroll-down-button",className:je("bg-popover z-10 flex cursor-default items-center justify-center py-1 [&_svg:not([class*='size-'])]:size-4 bottom-0 w-full",e),...t,children:n.jsx(kt,{})})}const Hr={title:"Forms/Select",component:Be,parameters:{layout:"centered"},tags:["autodocs"]},tt={render:()=>n.jsxs(Be,{children:[n.jsx(Ye,{className:"w-48",children:n.jsx(qe,{placeholder:"Select a fruit"})}),n.jsxs(Ge,{children:[n.jsx(ae,{value:"apple",children:"Apple"}),n.jsx(ae,{value:"banana",children:"Banana"}),n.jsx(ae,{value:"orange",children:"Orange"}),n.jsx(ae,{value:"grape",children:"Grape"})]})]})},ot={render:()=>n.jsxs(Be,{children:[n.jsx(Ye,{className:"w-48",children:n.jsx(qe,{placeholder:"Select a food"})}),n.jsxs(Ge,{children:[n.jsxs(At,{children:[n.jsx(Ct,{children:"Fruits"}),n.jsx(ae,{value:"apple",children:"Apple"}),n.jsx(ae,{value:"banana",children:"Banana"}),n.jsx(ae,{value:"orange",children:"Orange"})]}),n.jsxs(At,{children:[n.jsx(Ct,{children:"Vegetables"}),n.jsx(ae,{value:"carrot",children:"Carrot"}),n.jsx(ae,{value:"broccoli",children:"Broccoli"}),n.jsx(ae,{value:"spinach",children:"Spinach"})]})]})]})},nt={render:()=>n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs(Be,{children:[n.jsx(Ye,{size:"sm",className:"w-48",children:n.jsx(qe,{placeholder:"Small"})}),n.jsxs(Ge,{children:[n.jsx(ae,{value:"1",children:"Option 1"}),n.jsx(ae,{value:"2",children:"Option 2"})]})]}),n.jsxs(Be,{children:[n.jsx(Ye,{size:"default",className:"w-48",children:n.jsx(qe,{placeholder:"Default"})}),n.jsxs(Ge,{children:[n.jsx(ae,{value:"1",children:"Option 1"}),n.jsx(ae,{value:"2",children:"Option 2"})]})]})]})},rt={render:()=>n.jsxs(Be,{disabled:!0,children:[n.jsx(Ye,{className:"w-48",children:n.jsx(qe,{placeholder:"Disabled select"})}),n.jsx(Ge,{children:n.jsx(ae,{value:"1",children:"Option 1"})})]})};var Et,Pt,Vt;tt.parameters={...tt.parameters,docs:{...(Et=tt.parameters)==null?void 0:Et.docs,source:{originalSource:`{
  render: () => <Select>
      <SelectTrigger className="w-48">
        <SelectValue placeholder="Select a fruit" />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="apple">Apple</SelectItem>
        <SelectItem value="banana">Banana</SelectItem>
        <SelectItem value="orange">Orange</SelectItem>
        <SelectItem value="grape">Grape</SelectItem>
      </SelectContent>
    </Select>
}`,...(Vt=(Pt=tt.parameters)==null?void 0:Pt.docs)==null?void 0:Vt.source}}};var jt,Nt,Ht;ot.parameters={...ot.parameters,docs:{...(jt=ot.parameters)==null?void 0:jt.docs,source:{originalSource:`{
  render: () => <Select>
      <SelectTrigger className="w-48">
        <SelectValue placeholder="Select a food" />
      </SelectTrigger>
      <SelectContent>
        <SelectGroup>
          <SelectLabel>Fruits</SelectLabel>
          <SelectItem value="apple">Apple</SelectItem>
          <SelectItem value="banana">Banana</SelectItem>
          <SelectItem value="orange">Orange</SelectItem>
        </SelectGroup>
        <SelectGroup>
          <SelectLabel>Vegetables</SelectLabel>
          <SelectItem value="carrot">Carrot</SelectItem>
          <SelectItem value="broccoli">Broccoli</SelectItem>
          <SelectItem value="spinach">Spinach</SelectItem>
        </SelectGroup>
      </SelectContent>
    </Select>
}`,...(Ht=(Nt=ot.parameters)==null?void 0:Nt.docs)==null?void 0:Ht.source}}};var Lt,Dt,Ut;nt.parameters={...nt.parameters,docs:{...(Lt=nt.parameters)==null?void 0:Lt.docs,source:{originalSource:`{
  render: () => <div className="flex flex-col gap-4">
      <Select>
        <SelectTrigger size="sm" className="w-48">
          <SelectValue placeholder="Small" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="1">Option 1</SelectItem>
          <SelectItem value="2">Option 2</SelectItem>
        </SelectContent>
      </Select>
      <Select>
        <SelectTrigger size="default" className="w-48">
          <SelectValue placeholder="Default" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="1">Option 1</SelectItem>
          <SelectItem value="2">Option 2</SelectItem>
        </SelectContent>
      </Select>
    </div>
}`,...(Ut=(Dt=nt.parameters)==null?void 0:Dt.docs)==null?void 0:Ut.source}}};var Bt,Ot,Ft;rt.parameters={...rt.parameters,docs:{...(Bt=rt.parameters)==null?void 0:Bt.docs,source:{originalSource:`{
  render: () => <Select disabled>
      <SelectTrigger className="w-48">
        <SelectValue placeholder="Disabled select" />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="1">Option 1</SelectItem>
      </SelectContent>
    </Select>
}`,...(Ft=(Ot=rt.parameters)==null?void 0:Ot.docs)==null?void 0:Ft.source}}};const Lr=["Default","WithGroups","Sizes","Disabled"];export{tt as Default,rt as Disabled,nt as Sizes,ot as WithGroups,Lr as __namedExportsOrder,Hr as default};
