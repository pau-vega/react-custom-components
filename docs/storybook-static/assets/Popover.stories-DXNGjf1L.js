var je=Object.defineProperty;var Fe=(t,a,i)=>a in t?je(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i;var oe=(t,a,i)=>Fe(t,typeof a!="symbol"?a+"":a,i);import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{t as Ne,c as Me}from"./bundle-mjs-BNe0Xlio.js";import{r as o}from"./index-Br2IOmUs.js";import{u as we,I as ke,F as Be}from"./InternalBackdrop-IVVNL8k2.js";import{f as Z,u as Ae}from"./empty-BwNtW-GQ.js";import{r as ne}from"./index-B1jiiJTD.js";import{T as He}from"./useTimeout-DEENwbcq.js";import{u as Le}from"./useOnMount-J4hPCZ9b.js";import{P as Ve,p as De,t as Ge,C as _e,g as Ue,i as Ke,a as We,b as ze,F as pe,m as Ye,n as $e,k as Se}from"./popupStateMapping-B2J1S55N.js";import{R as qe,P as Je,f as j,h as Qe,l as Xe,b as be,u as Ze,e as et,i as tt}from"./useInteractions-DLoJm_bm.js";import{p as ot,d as nt,a as st,b as rt,c as it,u as at}from"./useSyncedFloatingRootContext-BHS4UzMP.js";import{b as ee,t as se,e as ct,f as re,c as ie,m as pt}from"./createBaseUIEventDetails-BfRHIGKf.js";import{u as lt}from"./useOpenInteractionType-DABt_JZJ.js";import{u as ut}from"./useRole-BXNmVtjw.js";import{u as le}from"./useStableCallback-CgA2ffE5.js";import{u as dt}from"./useButton-D8OkA_9h.js";import{u as ae}from"./useRenderElement-DBf0zvZM.js";import{u as mt}from"./useBaseUiId-Ds3dA0Bv.js";import{u as gt,a as ft}from"./useHoverReferenceInteraction-BCD5gqBx.js";import{s as ht}from"./safePolygon-B1_E0Dln.js";import{u as vt}from"./useClick-TS9p-E59.js";import{d as Pt}from"./element-vmEcGomw.js";import{i as xt}from"./inertValue-Cg075CKc.js";import{u as Ct}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{u as Tt,g as Ee,a as Rt}from"./getDisabledMountTransitionStyles-xn1qLHjW.js";import{b as St,a as bt,t as Et}from"./useTransitionStatus-H-zITwNf.js";import{a as It}from"./floating-ui.utils.dom-BR__G8pa.js";import{C as Ot}from"./composite-CCzA221R.js";import{u as yt}from"./ToolbarRootContext-Dqmc35tY.js";import{B as U}from"./button-BPsk-mQ5.js";import{I as ue}from"./input-D7tkER31.js";import{L as de}from"./label-DGf5SUOA.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./useValueAsRef-uCcb0GiG.js";import"./visuallyHidden-BwafneL2.js";import"./useAnimationFrame-BGZzLPhQ.js";import"./event-D_tFMKDJ.js";import"./detectBrowser-Cp-v3zjv.js";import"./owner-CQsS7OFZ.js";import"./index-CGqftQ-p.js";import"./constants-CRqqCNE_.js";import"./getEmptyRootContext-DHQYzQq2.js";import"./floating-ui.utils-CkpHT9gb.js";import"./DirectionContext-DcsIbjZ7.js";import"./useFloatingRootContext-Czq2kyX1.js";import"./index-BYe2eu78.js";import"./Button-BfmJxKsd.js";import"./useControlled-BhWCjR1C.js";import"./LabelableContext-DhTQYAer.js";import"./useLabelableId-BJBp94oK.js";const Ie=o.createContext(void 0);function Y(t){const a=o.useContext(Ie);if(a===void 0&&!t)throw new Error(Z(47));return a}function jt(){return{...nt(),disabled:!1,modal:!1,instantType:void 0,openMethod:null,openChangeReason:null,titleElementId:void 0,descriptionElementId:void 0,stickIfOpen:!0,nested:!1,openOnHover:!1,closeDelay:0,hasViewport:!1}}const Ft={...ot,disabled:j(t=>t.disabled),instantType:j(t=>t.instantType),openMethod:j(t=>t.openMethod),openChangeReason:j(t=>t.openChangeReason),modal:j(t=>t.modal),stickIfOpen:j(t=>t.stickIfOpen),titleElementId:j(t=>t.titleElementId),descriptionElementId:j(t=>t.descriptionElementId),openOnHover:j(t=>t.openOnHover),closeDelay:j(t=>t.closeDelay),hasViewport:j(t=>t.hasViewport)};class ce extends qe{constructor(i){const s={...jt(),...i};s.open&&(i==null?void 0:i.mounted)===void 0&&(s.mounted=!0);super(s,{popupRef:o.createRef(),backdropRef:o.createRef(),internalBackdropRef:o.createRef(),onOpenChange:void 0,onOpenChangeComplete:void 0,triggerFocusTargetRef:o.createRef(),beforeContentFocusGuardRef:o.createRef(),stickIfOpenTimeout:new He,triggerElements:new Je},Ft);oe(this,"setOpen",(i,s)=>{var r,u;const v=s.reason===ee,l=s.reason===se&&s.event.detail===0,P=!i&&(s.reason===ct||s.reason==null);if(s.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},(u=(r=this.context).onOpenChange)==null||u.call(r,i,s),s.isCanceled)return;const f={open:i,nativeEvent:s.event,reason:s.reason,nested:this.state.nested,triggerElement:s.trigger},n=this.state.floatingRootContext.context.events;n==null||n.emit("openchange",f);const m=()=>{var h;const E={open:i,openChangeReason:s.reason},I=((h=s.trigger)==null?void 0:h.id)??null;(I||i)&&(E.activeTriggerId=I,E.activeTriggerElement=s.trigger??null),this.update(E)};v?(this.set("stickIfOpen",!0),this.context.stickIfOpenTimeout.start(Ve,()=>{this.set("stickIfOpen",!1)}),ne.flushSync(m)):m(),l||P?this.set("instantType",l?"click":"dismiss"):s.reason===re?this.set("instantType","focus"):this.set("instantType",void 0)});oe(this,"disposeEffect",()=>this.context.stickIfOpenTimeout.disposeEffect())}static useStore(i,s){const v=Ae(()=>new ce(s)).current,l=i??v;return Le(v.disposeEffect),l}}function me({props:t}){const{children:a,open:i,defaultOpen:s=!1,onOpenChange:v,onOpenChangeComplete:l,modal:P=!1,handle:f,triggerId:n,defaultTriggerId:m=null}=t,r=ce.useStore(f==null?void 0:f.store,{open:i??s,modal:P,activeTriggerId:n!==void 0?n:m});r.useControlledProp("open",i,s),r.useControlledProp("activeTriggerId",n,m);const u=r.useState("open"),E=r.useState("positionerElement"),I=r.useState("payload"),h=r.useState("openChangeReason");r.useContextCallback("onOpenChange",v),r.useContextCallback("onOpenChangeComplete",l);const{openMethod:p,triggerProps:g,reset:w}=lt(u);st(r);const{forceUnmount:c}=rt(u,r,()=>{r.update({stickIfOpen:!0,openChangeReason:null}),w()});we(u&&P===!0&&h!==ee&&p!=="touch",E),o.useEffect(()=>{u||r.context.stickIfOpenTimeout.clear()},[r,u]);const N=o.useCallback(d=>{const F=ie(d);return F.preventUnmountOnClose=()=>{r.set("preventUnmountingOnClose",!0)},F},[r]),T=o.useCallback(()=>{r.setOpen(!1,N(pt))},[r,N]);o.useImperativeHandle(t.actionsRef,()=>({unmount:c,close:T}),[c,T]);const x=it({popupStore:r,onOpenChange:r.setOpen}),O=Xe(x,{outsidePressEvent:{mouse:P==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}}),C=ut(x),{getReferenceProps:k,getFloatingProps:B,getTriggerProps:A}=be([O,C]),L=o.useMemo(()=>k(g),[k,g]),H=o.useMemo(()=>A(g),[A,g]),V=o.useMemo(()=>B(),[B]);r.useSyncedValues({modal:P,openMethod:p,activeTriggerProps:L,inactiveTriggerProps:H,popupProps:V,floatingRootContext:x,nested:Ze()!=null});const D=o.useMemo(()=>({store:r}),[r]);return e.jsx(Ie.Provider,{value:D,children:typeof a=="function"?a({payload:I}):a})}function Nt(t){return Y(!0)?e.jsx(me,{props:t}):e.jsx(Qe,{children:e.jsx(me,{props:t})})}const Mt=300,wt=o.forwardRef(function(a,i){const{render:s,className:v,disabled:l=!1,nativeButton:P=!0,handle:f,payload:n,openOnHover:m=!1,delay:r=Mt,closeDelay:u=0,id:E,...I}=a,h=Y(!0),p=(f==null?void 0:f.store)??(h==null?void 0:h.store);if(!p)throw new Error(Z(74));const g=mt(E),w=p.useState("isTriggerActive",g),c=p.useState("floatingRootContext"),N=p.useState("isOpenedByTrigger",g),T=o.useRef(null),{registerTrigger:x,isMountedByThisTrigger:O}=at(g,T,p,{payload:n,disabled:l,openOnHover:m,closeDelay:u}),C=p.useState("openChangeReason"),k=p.useState("stickIfOpen"),B=p.useState("openMethod"),A=gt(c,{enabled:c!=null&&m&&(B!=="touch"||C!==se),mouseOnly:!0,move:!1,handleClose:ht(),restMs:r,delay:{close:u},triggerElementRef:T,isActiveTrigger:w}),L=vt(c,{enabled:c!=null,stickIfOpen:k}),H=be([L]),V=p.useState("triggerProps",O),D=o.useMemo(()=>({disabled:l,open:N}),[l,N]),{getButtonProps:d,buttonRef:F}=dt({disabled:l,native:P}),_=o.useMemo(()=>({open(R){return R&&C===se?De.open(R):Ge.open(R)}}),[C]),z=ae("button",a,{state:D,ref:[F,i,x,T],props:[H.getReferenceProps(),A,V,{[_e]:"",id:g},I,d],stateAttributesMapping:_}),y=o.useRef(null),$=le(R=>{ne.flushSync(()=>{p.setOpen(!1,ie(re,R.nativeEvent,R.currentTarget))});const M=Ue(y.current);M==null||M.focus()}),te=le(R=>{var S;const M=p.select("positionerElement");if(M&&Ke(R,M))(S=p.context.beforeContentFocusGuardRef.current)==null||S.focus();else{ne.flushSync(()=>{p.setOpen(!1,ie(re,R.nativeEvent,R.currentTarget))});let b=We(p.context.triggerFocusTargetRef.current||T.current);for(;b!==null&&Pt(M,b);){const q=b;if(b=ze(b),b===q)break}b==null||b.focus()}});return w?e.jsxs(o.Fragment,{children:[e.jsx(pe,{ref:y,onFocus:$}),e.jsx(o.Fragment,{children:z},g),e.jsx(pe,{ref:p.context.triggerFocusTargetRef,onFocus:te})]}):e.jsx(o.Fragment,{children:z},g)}),Oe=o.createContext(void 0);function kt(){const t=o.useContext(Oe);if(t===void 0)throw new Error(Z(45));return t}const Bt=o.forwardRef(function(a,i){const{keepMounted:s=!1,...v}=a,{store:l}=Y();return l.useState("mounted")||s?e.jsx(Oe.Provider,{value:s,children:e.jsx(Ye,{ref:i,...v,renderGuards:!1})}):null}),ye=o.createContext(void 0);function At(){const t=o.useContext(ye);if(!t)throw new Error(Z(46));return t}const Ht=o.forwardRef(function(a,i){const{render:s,className:v,anchor:l,positionMethod:P="absolute",side:f="bottom",align:n="center",sideOffset:m=0,alignOffset:r=0,collisionBoundary:u="clipping-ancestors",collisionPadding:E=5,arrowPadding:I=5,sticky:h=!1,disableAnchorTracking:p=!1,collisionAvoidance:g=$e,...w}=a,{store:c}=Y(),N=kt(),T=et(),x=c.useState("floatingRootContext"),O=c.useState("mounted"),C=c.useState("open"),k=c.useState("openChangeReason"),B=c.useState("activeTriggerElement"),A=c.useState("modal"),L=c.useState("positionerElement"),H=c.useState("instantType"),V=c.useState("transitionStatus"),D=c.useState("hasViewport"),d=o.useRef(null),F=St(L,!1,!1),_=Tt({anchor:l,floatingRootContext:x,positionMethod:P,mounted:O,side:f,sideOffset:m,align:n,alignOffset:r,arrowPadding:I,collisionBoundary:u,collisionPadding:E,sticky:h,disableAnchorTracking:p,keepMounted:N,nodeId:T,collisionAvoidance:g,adaptiveOrigin:D?Rt:void 0}),z=o.useMemo(()=>{const S={};return C||(S.pointerEvents="none"),{role:"presentation",hidden:!O,style:{..._.positionerStyles,...S}}},[C,O,_.positionerStyles]),y=o.useMemo(()=>({props:z,..._}),[z,_]),$=x==null?void 0:x.select("domReferenceElement");Ct(()=>{const S=$,b=d.current;if(S&&(d.current=S),b&&S&&S!==b){c.set("instantType",void 0);const q=new AbortController;return F(()=>{c.set("instantType","trigger-change")},q.signal),()=>{q.abort()}}},[$,F,c]);const te=o.useMemo(()=>({open:C,side:y.side,align:y.align,anchorHidden:y.anchorHidden,instant:H}),[C,y.side,y.align,y.anchorHidden,H]),R=o.useCallback(S=>{c.set("positionerElement",S)},[c]),M=ae("div",a,{state:te,props:[y.props,Ee(V),w],ref:[i,R],stateAttributesMapping:Se});return e.jsxs(ye.Provider,{value:y,children:[O&&A===!0&&k!==ee&&e.jsx(ke,{ref:c.context.internalBackdropRef,inert:xt(!C),cutout:B}),e.jsx(tt,{id:T,children:M})]})}),Lt={...Se,...Et},Vt=o.forwardRef(function(a,i){const{className:s,render:v,initialFocus:l,finalFocus:P,...f}=a,{store:n}=Y(),m=At(),r=yt()!=null,u=n.useState("open"),E=n.useState("openMethod"),I=n.useState("instantType"),h=n.useState("transitionStatus"),p=n.useState("popupProps"),g=n.useState("titleElementId"),w=n.useState("descriptionElementId"),c=n.useState("modal"),N=n.useState("mounted"),T=n.useState("openChangeReason"),x=n.useState("activeTriggerElement"),O=n.useState("floatingRootContext");bt({open:u,ref:n.context.popupRef,onComplete(){var d,F;u&&((F=(d=n.context).onOpenChangeComplete)==null||F.call(d,!0))}});const C=n.useState("disabled"),k=n.useState("openOnHover"),B=n.useState("closeDelay");ft(O,{enabled:k&&!C,closeDelay:B});function A(d){return d==="touch"?n.context.popupRef.current:!0}const L=l===void 0?A:l,H=o.useMemo(()=>({open:u,side:m.side,align:m.align,instant:I,transitionStatus:h}),[u,m.side,m.align,I,h]),V=o.useCallback(d=>{n.set("popupElement",d)},[n]),D=ae("div",a,{state:H,ref:[i,n.context.popupRef,V],props:[p,{"aria-labelledby":g,"aria-describedby":w,onKeyDown(d){r&&Ot.has(d.key)&&d.stopPropagation()}},Ee(h),f],stateAttributesMapping:Lt});return e.jsx(Be,{context:O,openInteractionType:E,modal:c==="trap-focus",disabled:!N||T===ee,initialFocus:L,returnFocus:P,restoreFocus:"popup",previousFocusableElement:It(x)?x:void 0,nextFocusableElement:n.context.triggerFocusTargetRef,beforeContentFocusGuardRef:n.context.beforeContentFocusGuardRef,children:D})});function Dt(...t){return Ne(Me(t))}function G({...t}){return e.jsx(Nt,{"data-slot":"popover",...t})}function K({...t}){return e.jsx(wt,{"data-slot":"popover-trigger",...t})}function W({className:t,align:a="center",alignOffset:i=0,side:s="bottom",sideOffset:v=4,...l}){return e.jsx(Bt,{children:e.jsx(Ht,{align:a,alignOffset:i,side:s,sideOffset:v,className:"isolate z-50",children:e.jsx(Vt,{"data-slot":"popover-content",className:Dt("bg-popover text-popover-foreground data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ring-foreground/10 flex flex-col gap-4 rounded-md p-4 text-sm shadow-md ring-1 duration-100 data-[side=inline-start]:slide-in-from-right-2 data-[side=inline-end]:slide-in-from-left-2 z-50 w-72 origin-(--transform-origin) outline-hidden",t),...l})})})}const Vo={title:"Overlays/Popover",component:G,parameters:{layout:"centered"},tags:["autodocs"]},J={render:()=>e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Open Popover"})}),e.jsx(W,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Popover Title"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This is popover content with some text."})]})})]})},Q={render:()=>e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Edit Dimensions"})}),e.jsx(W,{className:"w-80",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Dimensions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set the dimensions for the layer."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(de,{htmlFor:"width",children:"Width"}),e.jsx(ue,{id:"width",defaultValue:"100%",className:"col-span-2 h-8"})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(de,{htmlFor:"height",children:"Height"}),e.jsx(ue,{id:"height",defaultValue:"25px",className:"col-span-2 h-8"})]})]})]})})]})},X={render:()=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Top"})}),e.jsx(W,{side:"top",children:"Popover on top"})]}),e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Bottom"})}),e.jsx(W,{side:"bottom",children:"Popover on bottom"})]}),e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Left"})}),e.jsx(W,{side:"left",children:"Popover on left"})]}),e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(U,{variant:"outline",children:"Right"})}),e.jsx(W,{side:"right",children:"Popover on right"})]})]})};var ge,fe,he;J.parameters={...J.parameters,docs:{...(ge=J.parameters)==null?void 0:ge.docs,source:{originalSource:`{
  render: () => <Popover>
      <PopoverTrigger asChild>
        <Button variant="outline">Open Popover</Button>
      </PopoverTrigger>
      <PopoverContent>
        <div className="space-y-2">
          <h4 className="font-medium">Popover Title</h4>
          <p className="text-sm text-muted-foreground">This is popover content with some text.</p>
        </div>
      </PopoverContent>
    </Popover>
}`,...(he=(fe=J.parameters)==null?void 0:fe.docs)==null?void 0:he.source}}};var ve,Pe,xe;Q.parameters={...Q.parameters,docs:{...(ve=Q.parameters)==null?void 0:ve.docs,source:{originalSource:`{
  render: () => <Popover>
      <PopoverTrigger asChild>
        <Button variant="outline">Edit Dimensions</Button>
      </PopoverTrigger>
      <PopoverContent className="w-80">
        <div className="grid gap-4">
          <div className="space-y-2">
            <h4 className="font-medium">Dimensions</h4>
            <p className="text-sm text-muted-foreground">Set the dimensions for the layer.</p>
          </div>
          <div className="grid gap-2">
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="width">Width</Label>
              <Input id="width" defaultValue="100%" className="col-span-2 h-8" />
            </div>
            <div className="grid grid-cols-3 items-center gap-4">
              <Label htmlFor="height">Height</Label>
              <Input id="height" defaultValue="25px" className="col-span-2 h-8" />
            </div>
          </div>
        </div>
      </PopoverContent>
    </Popover>
}`,...(xe=(Pe=Q.parameters)==null?void 0:Pe.docs)==null?void 0:xe.source}}};var Ce,Te,Re;X.parameters={...X.parameters,docs:{...(Ce=X.parameters)==null?void 0:Ce.docs,source:{originalSource:`{
  render: () => <div className="flex gap-4">
      <Popover>
        <PopoverTrigger asChild>
          <Button variant="outline">Top</Button>
        </PopoverTrigger>
        <PopoverContent side="top">Popover on top</PopoverContent>
      </Popover>
      <Popover>
        <PopoverTrigger asChild>
          <Button variant="outline">Bottom</Button>
        </PopoverTrigger>
        <PopoverContent side="bottom">Popover on bottom</PopoverContent>
      </Popover>
      <Popover>
        <PopoverTrigger asChild>
          <Button variant="outline">Left</Button>
        </PopoverTrigger>
        <PopoverContent side="left">Popover on left</PopoverContent>
      </Popover>
      <Popover>
        <PopoverTrigger asChild>
          <Button variant="outline">Right</Button>
        </PopoverTrigger>
        <PopoverContent side="right">Popover on right</PopoverContent>
      </Popover>
    </div>
}`,...(Re=(Te=X.parameters)==null?void 0:Te.docs)==null?void 0:Re.source}}};const Do=["Default","WithForm","Placements"];export{J as Default,X as Placements,Q as WithForm,Do as __namedExportsOrder,Vo as default};
