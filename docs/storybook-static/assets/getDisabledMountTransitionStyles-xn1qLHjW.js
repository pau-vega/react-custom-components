import{r as A}from"./index-Br2IOmUs.js";import{e as q,g as Y,a as N,b as Gt,c as Qt,d as Zt,h as en,i as re,m as de,j as _,s as tn,k as Ct,l as Et,r as be,n as Dt,o as He,p as Pt,q as j,f as ye,t as Ae}from"./floating-ui.utils-CkpHT9gb.js";import{o as Lt}from"./owner-CQsS7OFZ.js";import{u as ue}from"./useIsoLayoutEffect-B3i3ZXBb.js";import{u as ke}from"./useValueAsRef-uCcb0GiG.js";import{u as nn}from"./useStableCallback-CgA2ffE5.js";import{u as on}from"./DirectionContext-DcsIbjZ7.js";import{h as We,i as V,j as J,g as K,k as ht,d as U,a as G,l as Mt,m as Ve,n as me,o as Oe,p as sn,q as Tt,r as rn,c as Ie,e as ze,s as Ce}from"./floating-ui.utils.dom-BR__G8pa.js";import{r as cn}from"./index-B1jiiJTD.js";import{a as ln}from"./useInteractions-DLoJm_bm.js";import{u as an}from"./useFloatingRootContext-Czq2kyX1.js";import{D as fn}from"./popupStateMapping-B2J1S55N.js";import{E as un}from"./empty-BwNtW-GQ.js";function pt(e,t,i){let{reference:n,floating:o}=e;const s=N(t),r=Ct(t),c=Dt(r),a=Y(t),f=s==="y",l=n.x+n.width/2-o.width/2,u=n.y+n.height/2-o.height/2,g=n[c]/2-o[c]/2;let d;switch(a){case"top":d={x:l,y:n.y-o.height};break;case"bottom":d={x:l,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:u};break;case"left":d={x:n.x-o.width,y:u};break;default:d={x:n.x,y:n.y}}switch(re(t)){case"start":d[r]-=g*(i&&f?-1:1);break;case"end":d[r]+=g*(i&&f?-1:1);break}return d}async function dn(e,t){var i;t===void 0&&(t={});const{x:n,y:o,platform:s,rects:r,elements:c,strategy:a}=e,{boundary:f="clippingAncestors",rootBoundary:l="viewport",elementContext:u="floating",altBoundary:g=!1,padding:d=0}=q(t,e),m=Et(d),x=c[g?u==="floating"?"reference":"floating":u],w=be(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(x)))==null||i?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:f,rootBoundary:l,strategy:a})),v=u==="floating"?{x:n,y:o,width:r.floating.width,height:r.floating.height}:r.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),y=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},O=be(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:v,offsetParent:R,strategy:a}):v);return{top:(w.top-O.top+m.top)/y.y,bottom:(O.bottom-w.bottom+m.bottom)/y.y,left:(w.left-O.left+m.left)/y.x,right:(O.right-w.right+m.right)/y.x}}const mn=async(e,t,i)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:r}=i,c=s.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(t));let f=await r.getElementRects({reference:e,floating:t,strategy:o}),{x:l,y:u}=pt(f,n,a),g=n,d={},m=0;for(let x=0;x<c.length;x++){var h;const{name:w,fn:v}=c[x],{x:R,y,data:O,reset:S}=await v({x:l,y:u,initialPlacement:n,placement:g,strategy:o,middlewareData:d,rects:f,platform:{...r,detectOverflow:(h=r.detectOverflow)!=null?h:dn},elements:{reference:e,floating:t}});l=R??l,u=y??u,d={...d,[w]:{...d[w],...O}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(g=S.placement),S.rects&&(f=S.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:o}):S.rects),{x:l,y:u}=pt(f,g,a)),x=-1)}return{x:l,y:u,placement:g,strategy:o,middlewareData:d}},gn=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:o,middlewareData:s,rects:r,initialPlacement:c,platform:a,elements:f}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:g,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:h=!0,...x}=q(e,t);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const w=Y(o),v=N(c),R=Y(c)===c,y=await(a.isRTL==null?void 0:a.isRTL(f.floating)),O=g||(R||!h?[Gt(c)]:Qt(c)),S=m!=="none";!g&&S&&O.push(...Zt(c,h,m,y));const b=[c,...O],C=await a.detectOverflow(t,x),I=[];let T=((n=s.flip)==null?void 0:n.overflows)||[];if(l&&I.push(C[w]),u){const $=en(o,r,y);I.push(C[$[0]],C[$[1]])}if(T=[...T,{placement:o,overflows:I}],!I.every($=>$<=0)){var B,H;const $=(((B=s.flip)==null?void 0:B.index)||0)+1,L=b[$];if(L&&(!(u==="alignment"?v!==N(L):!1)||T.every(p=>N(p.placement)===v?p.overflows[0]>0:!0)))return{data:{index:$,overflows:T},reset:{placement:L}};let M=(H=T.filter(k=>k.overflows[0]<=0).sort((k,p)=>k.overflows[1]-p.overflows[1])[0])==null?void 0:H.placement;if(!M)switch(d){case"bestFit":{var P;const k=(P=T.filter(p=>{if(S){const E=N(p.placement);return E===v||E==="y"}return!0}).map(p=>[p.placement,p.overflows.filter(E=>E>0).reduce((E,W)=>E+W,0)]).sort((p,E)=>p[1]-E[1])[0])==null?void 0:P[0];k&&(M=k);break}case"initialPlacement":M=c;break}if(o!==M)return{reset:{placement:M}}}return{}}}};function xt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function wt(e){return tn.some(t=>e[t]>=0)}const hn=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i,platform:n}=t,{strategy:o="referenceHidden",...s}=q(e,t);switch(o){case"referenceHidden":{const r=await n.detectOverflow(t,{...s,elementContext:"reference"}),c=xt(r,i.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:wt(c)}}}case"escaped":{const r=await n.detectOverflow(t,{...s,altBoundary:!0}),c=xt(r,i.floating);return{data:{escapedOffsets:c,escaped:wt(c)}}}default:return{}}}}},Ft=new Set(["left","top"]);async function pn(e,t){const{placement:i,platform:n,elements:o}=e,s=await(n.isRTL==null?void 0:n.isRTL(o.floating)),r=Y(i),c=re(i),a=N(i)==="y",f=Ft.has(r)?-1:1,l=s&&a?-1:1,u=q(t,e);let{mainAxis:g,crossAxis:d,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return c&&typeof m=="number"&&(d=c==="end"?m*-1:m),a?{x:d*l,y:g*f}:{x:g*f,y:d*l}}const xn=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:o,y:s,placement:r,middlewareData:c}=t,a=await pn(t,e);return r===((i=c.offset)==null?void 0:i.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:o+a.x,y:s+a.y,data:{...a,placement:r}}}}},wn=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:o,platform:s}=t,{mainAxis:r=!0,crossAxis:c=!1,limiter:a={fn:w=>{let{x:v,y:R}=w;return{x:v,y:R}}},...f}=q(e,t),l={x:i,y:n},u=await s.detectOverflow(t,f),g=N(Y(o)),d=Pt(g);let m=l[d],h=l[g];if(r){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",R=m+u[w],y=m-u[v];m=He(R,m,y)}if(c){const w=g==="y"?"top":"left",v=g==="y"?"bottom":"right",R=h+u[w],y=h-u[v];h=He(R,h,y)}const x=a.fn({...t,[d]:m,[g]:h});return{...x,data:{x:x.x-i,y:x.y-n,enabled:{[d]:r,[g]:c}}}}}},yn=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:o,rects:s,middlewareData:r}=t,{offset:c=0,mainAxis:a=!0,crossAxis:f=!0}=q(e,t),l={x:i,y:n},u=N(o),g=Pt(u);let d=l[g],m=l[u];const h=q(c,t),x=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(a){const R=g==="y"?"height":"width",y=s.reference[g]-s.floating[R]+x.mainAxis,O=s.reference[g]+s.reference[R]-x.mainAxis;d<y?d=y:d>O&&(d=O)}if(f){var w,v;const R=g==="y"?"width":"height",y=Ft.has(Y(o)),O=s.reference[u]-s.floating[R]+(y&&((w=r.offset)==null?void 0:w[u])||0)+(y?0:x.crossAxis),S=s.reference[u]+s.reference[R]+(y?0:((v=r.offset)==null?void 0:v[u])||0)-(y?x.crossAxis:0);m<O?m=O:m>S&&(m=S)}return{[g]:d,[u]:m}}}},vn=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,n;const{placement:o,rects:s,platform:r,elements:c}=t,{apply:a=()=>{},...f}=q(e,t),l=await r.detectOverflow(t,f),u=Y(o),g=re(o),d=N(o)==="y",{width:m,height:h}=s.floating;let x,w;u==="top"||u==="bottom"?(x=u,w=g===(await(r.isRTL==null?void 0:r.isRTL(c.floating))?"start":"end")?"left":"right"):(w=u,x=g==="end"?"top":"bottom");const v=h-l.top-l.bottom,R=m-l.left-l.right,y=de(h-l[x],v),O=de(m-l[w],R),S=!t.middlewareData.shift;let b=y,C=O;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(C=R),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(b=v),S&&!g){const T=_(l.left,0),B=_(l.right,0),H=_(l.top,0),P=_(l.bottom,0);d?C=m-2*(T!==0||B!==0?T+B:_(l.left,l.right)):b=h-2*(H!==0||P!==0?H+P:_(l.top,l.bottom))}await a({...t,availableWidth:C,availableHeight:b});const I=await r.getDimensions(c.floating);return m!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function kt(e){const t=U(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=G(e),s=o?e.offsetWidth:i,r=o?e.offsetHeight:n,c=Ae(i)!==s||Ae(n)!==r;return c&&(i=s,n=r),{width:i,height:n,$:c}}function _e(e){return V(e)?e:e.contextElement}function se(e){const t=_e(e);if(!G(t))return j(1);const i=t.getBoundingClientRect(),{width:n,height:o,$:s}=kt(t);let r=(s?Ae(i.width):i.width)/n,c=(s?Ae(i.height):i.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!c||!Number.isFinite(c))&&(c=1),{x:r,y:c}}const Rn=j(0);function $t(e){const t=K(e);return!Mt()||!t.visualViewport?Rn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bn(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==K(e)?!1:t}function Q(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),s=_e(e);let r=j(1);t&&(n?V(n)&&(r=se(n)):r=se(e));const c=bn(s,i,n)?$t(s):j(0);let a=(o.left+c.x)/r.x,f=(o.top+c.y)/r.y,l=o.width/r.x,u=o.height/r.y;if(s){const g=K(s),d=n&&V(n)?K(n):n;let m=g,h=ht(m);for(;h&&n&&d!==m;){const x=se(h),w=h.getBoundingClientRect(),v=U(h),R=w.left+(h.clientLeft+parseFloat(v.paddingLeft))*x.x,y=w.top+(h.clientTop+parseFloat(v.paddingTop))*x.y;a*=x.x,f*=x.y,l*=x.x,u*=x.y,a+=R,f+=y,m=K(h),h=ht(m)}}return be({width:l,height:u,x:a,y:f})}function Ee(e,t){const i=Ce(e).scrollLeft;return t?t.left+i:Q(J(e)).left+i}function Bt(e,t){const i=e.getBoundingClientRect(),n=i.left+t.scrollLeft-Ee(e,i),o=i.top+t.scrollTop;return{x:n,y:o}}function An(e){let{elements:t,rect:i,offsetParent:n,strategy:o}=e;const s=o==="fixed",r=J(n),c=t?Ve(t.floating):!1;if(n===r||c&&s)return i;let a={scrollLeft:0,scrollTop:0},f=j(1);const l=j(0),u=G(n);if((u||!u&&!s)&&((Ie(n)!=="body"||ze(r))&&(a=Ce(n)),G(n))){const d=Q(n);f=se(n),l.x=d.x+n.clientLeft,l.y=d.y+n.clientTop}const g=r&&!u&&!s?Bt(r,a):j(0);return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-a.scrollLeft*f.x+l.x+g.x,y:i.y*f.y-a.scrollTop*f.y+l.y+g.y}}function On(e){return Array.from(e.getClientRects())}function Sn(e){const t=J(e),i=Ce(e),n=e.ownerDocument.body,o=_(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=_(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Ee(e);const c=-i.scrollTop;return U(n).direction==="rtl"&&(r+=_(t.clientWidth,n.clientWidth)-o),{width:o,height:s,x:r,y:c}}const yt=25;function Cn(e,t){const i=K(e),n=J(e),o=i.visualViewport;let s=n.clientWidth,r=n.clientHeight,c=0,a=0;if(o){s=o.width,r=o.height;const l=Mt();(!l||l&&t==="fixed")&&(c=o.offsetLeft,a=o.offsetTop)}const f=Ee(n);if(f<=0){const l=n.ownerDocument,u=l.body,g=getComputedStyle(u),d=l.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,m=Math.abs(n.clientWidth-u.clientWidth-d);m<=yt&&(s-=m)}else f<=yt&&(s+=f);return{width:s,height:r,x:c,y:a}}const En=new Set(["absolute","fixed"]);function Dn(e,t){const i=Q(e,!0,t==="fixed"),n=i.top+e.clientTop,o=i.left+e.clientLeft,s=G(e)?se(e):j(1),r=e.clientWidth*s.x,c=e.clientHeight*s.y,a=o*s.x,f=n*s.y;return{width:r,height:c,x:a,y:f}}function vt(e,t,i){let n;if(t==="viewport")n=Cn(e,i);else if(t==="document")n=Sn(J(e));else if(V(t))n=Dn(t,i);else{const o=$t(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return be(n)}function Ht(e,t){const i=me(e);return i===t||!V(i)||Oe(i)?!1:U(i).position==="fixed"||Ht(i,t)}function Pn(e,t){const i=t.get(e);if(i)return i;let n=We(e,[],!1).filter(c=>V(c)&&Ie(c)!=="body"),o=null;const s=U(e).position==="fixed";let r=s?me(e):e;for(;V(r)&&!Oe(r);){const c=U(r),a=Tt(r);!a&&c.position==="fixed"&&(o=null),(s?!a&&!o:!a&&c.position==="static"&&!!o&&En.has(o.position)||ze(r)&&!a&&Ht(e,r))?n=n.filter(l=>l!==r):o=c,r=me(r)}return t.set(e,n),n}function Ln(e){let{element:t,boundary:i,rootBoundary:n,strategy:o}=e;const r=[...i==="clippingAncestors"?Ve(t)?[]:Pn(t,this._c):[].concat(i),n],c=r[0],a=r.reduce((f,l)=>{const u=vt(t,l,o);return f.top=_(u.top,f.top),f.right=de(u.right,f.right),f.bottom=de(u.bottom,f.bottom),f.left=_(u.left,f.left),f},vt(t,c,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Mn(e){const{width:t,height:i}=kt(e);return{width:t,height:i}}function Tn(e,t,i){const n=G(t),o=J(t),s=i==="fixed",r=Q(e,!0,s,t);let c={scrollLeft:0,scrollTop:0};const a=j(0);function f(){a.x=Ee(o)}if(n||!n&&!s)if((Ie(t)!=="body"||ze(o))&&(c=Ce(t)),n){const d=Q(t,!0,s,t);a.x=d.x+t.clientLeft,a.y=d.y+t.clientTop}else o&&f();s&&!n&&o&&f();const l=o&&!n&&!s?Bt(o,c):j(0),u=r.left+c.scrollLeft-a.x-l.x,g=r.top+c.scrollTop-a.y-l.y;return{x:u,y:g,width:r.width,height:r.height}}function $e(e){return U(e).position==="static"}function Rt(e,t){if(!G(e)||U(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return J(e)===i&&(i=i.ownerDocument.body),i}function Wt(e,t){const i=K(e);if(Ve(e))return i;if(!G(e)){let o=me(e);for(;o&&!Oe(o);){if(V(o)&&!$e(o))return o;o=me(o)}return i}let n=Rt(e,t);for(;n&&sn(n)&&$e(n);)n=Rt(n,t);return n&&Oe(n)&&$e(n)&&!Tt(n)?i:n||rn(e)||i}const Fn=async function(e){const t=this.getOffsetParent||Wt,i=this.getDimensions,n=await i(e.floating);return{reference:Tn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function kn(e){return U(e).direction==="rtl"}const $n={convertOffsetParentRelativeRectToViewportRelativeRect:An,getDocumentElement:J,getClippingRect:Ln,getOffsetParent:Wt,getElementRects:Fn,getClientRects:On,getDimensions:Mn,getScale:se,isElement:V,isRTL:kn};function Vt(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Bn(e,t){let i=null,n;const o=J(e);function s(){var c;clearTimeout(n),(c=i)==null||c.disconnect(),i=null}function r(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),s();const f=e.getBoundingClientRect(),{left:l,top:u,width:g,height:d}=f;if(c||t(),!g||!d)return;const m=ye(u),h=ye(o.clientWidth-(l+g)),x=ye(o.clientHeight-(u+d)),w=ye(l),R={rootMargin:-m+"px "+-h+"px "+-x+"px "+-w+"px",threshold:_(0,de(1,a))||1};let y=!0;function O(S){const b=S[0].intersectionRatio;if(b!==a){if(!y)return r();b?r(!1,b):n=setTimeout(()=>{r(!1,1e-7)},1e3)}b===1&&!Vt(f,e.getBoundingClientRect())&&r(),y=!1}try{i=new IntersectionObserver(O,{...R,root:o.ownerDocument})}catch{i=new IntersectionObserver(O,R)}i.observe(e)}return r(!0),s}function bt(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,f=_e(e),l=o||s?[...f?We(f):[],...We(t)]:[];l.forEach(w=>{o&&w.addEventListener("scroll",i,{passive:!0}),s&&w.addEventListener("resize",i)});const u=f&&c?Bn(f,i):null;let g=-1,d=null;r&&(d=new ResizeObserver(w=>{let[v]=w;v&&v.target===f&&d&&(d.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var R;(R=d)==null||R.observe(t)})),i()}),f&&!a&&d.observe(f),d.observe(t));let m,h=a?Q(e):null;a&&x();function x(){const w=Q(e);h&&!Vt(h,w)&&i(),h=w,m=requestAnimationFrame(x)}return i(),()=>{var w;l.forEach(v=>{o&&v.removeEventListener("scroll",i),s&&v.removeEventListener("resize",i)}),u==null||u(),(w=d)==null||w.disconnect(),d=null,a&&cancelAnimationFrame(m)}}const Hn=xn,Wn=wn,Vn=gn,In=vn,zn=hn,_n=yn,Yn=(e,t,i)=>{const n=new Map,o={platform:$n,...i},s={...o.platform,_c:n};return mn(e,t,{...o,platform:s})};var Nn=typeof document<"u",Xn=function(){},ve=Nn?A.useLayoutEffect:Xn;function Se(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!Se(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),i=o.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=i;n--!==0;){const s=o[n];if(!(s==="_owner"&&e.$$typeof)&&!Se(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function It(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function At(e,t){const i=It(e);return Math.round(t*i)/i}function Be(e){const t=A.useRef(e);return ve(()=>{t.current=e}),t}function jn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:o,elements:{reference:s,floating:r}={},transform:c=!0,whileElementsMounted:a,open:f}=e,[l,u]=A.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[g,d]=A.useState(n);Se(g,n)||d(n);const[m,h]=A.useState(null),[x,w]=A.useState(null),v=A.useCallback(p=>{p!==S.current&&(S.current=p,h(p))},[]),R=A.useCallback(p=>{p!==b.current&&(b.current=p,w(p))},[]),y=s||m,O=r||x,S=A.useRef(null),b=A.useRef(null),C=A.useRef(l),I=a!=null,T=Be(a),B=Be(o),H=Be(f),P=A.useCallback(()=>{if(!S.current||!b.current)return;const p={placement:t,strategy:i,middleware:g};B.current&&(p.platform=B.current),Yn(S.current,b.current,p).then(E=>{const W={...E,isPositioned:H.current!==!1};$.current&&!Se(C.current,W)&&(C.current=W,cn.flushSync(()=>{u(W)}))})},[g,t,i,B,H]);ve(()=>{f===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,u(p=>({...p,isPositioned:!1})))},[f]);const $=A.useRef(!1);ve(()=>($.current=!0,()=>{$.current=!1}),[]),ve(()=>{if(y&&(S.current=y),O&&(b.current=O),y&&O){if(T.current)return T.current(y,O,P);P()}},[y,O,P,T,I]);const L=A.useMemo(()=>({reference:S,floating:b,setReference:v,setFloating:R}),[v,R]),M=A.useMemo(()=>({reference:y,floating:O}),[y,O]),k=A.useMemo(()=>{const p={position:i,left:0,top:0};if(!M.floating)return p;const E=At(M.floating,l.x),W=At(M.floating,l.y);return c?{...p,transform:"translate("+E+"px, "+W+"px)",...It(M.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:E,top:W}},[i,c,M.floating,l.x,l.y]);return A.useMemo(()=>({...l,update:P,refs:L,elements:M,floatingStyles:k}),[l,P,L,M,k])}const qn=(e,t)=>({...Hn(e),options:[e,t]}),Un=(e,t)=>({...Wn(e),options:[e,t]}),Jn=(e,t)=>({..._n(e),options:[e,t]}),Kn=(e,t)=>({...Vn(e),options:[e,t]}),Gn=(e,t)=>({...In(e),options:[e,t]}),Qn=(e,t)=>({...zn(e),options:[e,t]});function Zn(e={}){const{nodeId:t,externalTree:i}=e,n=an(e),o=e.rootContext||n,s={reference:o.useState("referenceElement"),floating:o.useState("floatingElement"),domReference:o.useState("domReferenceElement")},[r,c]=A.useState(null),a=A.useRef(null),f=ln(i);ue(()=>{s.domReference&&(a.current=s.domReference)},[s.domReference]);const l=jn({...e,elements:{...s,...r&&{reference:r}}}),u=A.useCallback(b=>{const C=V(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),getClientRects:()=>b.getClientRects(),contextElement:b}:b;c(C),l.refs.setReference(C)},[l.refs]),[g,d]=A.useState(null),[m,h]=A.useState(null);o.useSyncedValue("referenceElement",g),o.useSyncedValue("domReferenceElement",V(g)?g:null),o.useSyncedValue("floatingElement",m);const x=A.useCallback(b=>{(V(b)||b===null)&&(a.current=b,d(b)),(V(l.refs.reference.current)||l.refs.reference.current===null||b!==null&&!V(b))&&l.refs.setReference(b)},[l.refs,d]),w=A.useCallback(b=>{h(b),l.refs.setFloating(b)},[l.refs]),v=A.useMemo(()=>({...l.refs,setReference:x,setFloating:w,setPositionReference:u,domReference:a}),[l.refs,x,w,u]),R=A.useMemo(()=>({...l.elements,domReference:s.domReference}),[l.elements,s.domReference]),y=o.useState("open"),O=o.useState("floatingId"),S=A.useMemo(()=>({...l,dataRef:o.context.dataRef,open:y,onOpenChange:o.setOpen,events:o.context.events,floatingId:O,refs:v,elements:R,nodeId:t,rootStore:o}),[l,v,R,t,o,y,O]);return ue(()=>{o.context.dataRef.current.floatingContext=S;const b=f==null?void 0:f.nodesRef.current.find(C=>C.id===t);b&&(b.context=S)}),A.useMemo(()=>({...l,context:S,refs:v,elements:R,rootStore:o}),[l,v,R,S,o])}const ei=e=>({name:"arrow",options:e,async fn(t){var E,W;const{x:i,y:n,placement:o,rects:s,platform:r,elements:c,middlewareData:a}=t,{element:f,padding:l=0,offsetParent:u="real"}=q(e,t)||{};if(f==null)return{};const g=Et(l),d={x:i,y:n},m=Ct(o),h=Dt(m),x=await r.getDimensions(f),w=m==="y",v=w?"top":"left",R=w?"bottom":"right",y=w?"clientHeight":"clientWidth",O=s.reference[h]+s.reference[m]-d[m]-s.floating[h],S=d[m]-s.reference[m],b=u==="real"?await((E=r.getOffsetParent)==null?void 0:E.call(r,f)):c.floating;let C=c.floating[y]||s.floating[h];(!C||!await((W=r.isElement)==null?void 0:W.call(r,b)))&&(C=c.floating[y]||s.floating[h]);const I=O/2-S/2,T=C/2-x[h]/2-1,B=Math.min(g[v],T),H=Math.min(g[R],T),P=B,$=C-x[h]-H,L=C/2-x[h]/2+I,M=He(P,L,$),k=!a.arrow&&re(o)!=null&&L!==M&&s.reference[h]/2-(L<P?B:H)-x[h]/2<0,p=k?L<P?L-P:L-$:0;return{[m]:d[m]+p,data:{[m]:M,centerOffset:L-M-p,...k&&{alignmentOffset:p}},reset:k}}}),ti=(e,t)=>({...ei(e),options:[e,t]}),ni={name:"hide",async fn(e){var c;const{width:t,height:i,x:n,y:o}=e.rects.reference,s=t===0&&i===0&&n===0&&o===0;return{data:{referenceHidden:((c=(await Qn().fn(e)).data)==null?void 0:c.referenceHidden)||s}}}},Re={sideX:"left",sideY:"top"},wi={name:"adaptiveOrigin",async fn(e){var v,R;const{x:t,y:i,rects:{floating:n},elements:{floating:o},platform:s,strategy:r,placement:c}=e,a=K(o),f=a.getComputedStyle(o);if(!(f.transitionDuration!=="0s"&&f.transitionDuration!==""))return{x:t,y:i,data:Re};const u=await((v=s.getOffsetParent)==null?void 0:v.call(s,o));let g={width:0,height:0};if(r==="fixed"&&(a!=null&&a.visualViewport))g={width:a.visualViewport.width,height:a.visualViewport.height};else if(u===a){const y=Lt(o);g={width:y.documentElement.clientWidth,height:y.documentElement.clientHeight}}else await((R=s.isElement)==null?void 0:R.call(s,u))&&(g=await s.getDimensions(u));const d=Y(c);let m=t,h=i;d==="left"&&(m=g.width-(t+n.width)),d==="top"&&(h=g.height-(i+n.height));const x=d==="left"?"right":Re.sideX,w=d==="top"?"bottom":Re.sideY;return{x:m,y:h,data:{sideX:x,sideY:w}}}};function zt(e,t,i){const n=e==="inline-start"||e==="inline-end";return{top:"top",right:n?i?"inline-start":"inline-end":"right",bottom:"bottom",left:n?i?"inline-end":"inline-start":"left"}[t]}function Ot(e,t,i){const{rects:n,placement:o}=e;return{side:zt(t,Y(o),i),align:re(o)||"center",anchor:{width:n.reference.width,height:n.reference.height},positioner:{width:n.floating.width,height:n.floating.height}}}function yi(e){var at,ft;const{anchor:t,positionMethod:i="absolute",side:n="bottom",sideOffset:o=0,align:s="center",alignOffset:r=0,collisionBoundary:c,collisionPadding:a=5,sticky:f=!1,arrowPadding:l=5,disableAnchorTracking:u=!1,keepMounted:g=!1,floatingRootContext:d,mounted:m,collisionAvoidance:h,shiftCrossAxis:x=!1,nodeId:w,adaptiveOrigin:v,lazyFlip:R=!1,externalTree:y}=e,[O,S]=A.useState(null);!m&&O!==null&&S(null);const b=h.side||"flip",C=h.align||"flip",I=h.fallbackAxisSide||"end",T=typeof t=="function"?t:void 0,B=nn(T),H=T?B:t,P=ke(t),L=on()==="rtl",M=O||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":L?"left":"right","inline-start":L?"right":"left"}[n],k=s==="center"?M:`${M}-${s}`;let p=a;const E=1,W=n==="bottom"?E:0,Ye=n==="top"?E:0,Ne=n==="right"?E:0,Xe=n==="left"?E:0;typeof p=="number"?p={top:p+W,right:p+Xe,bottom:p+Ye,left:p+Ne}:p&&(p={top:(p.top||0)+W,right:(p.right||0)+Xe,bottom:(p.bottom||0)+Ye,left:(p.left||0)+Ne});const ge={boundary:c==="clipping-ancestors"?"clippingAncestors":c,padding:p},Z=A.useRef(null),De=ke(o),Pe=ke(r),he=[qn(D=>{const F=Ot(D,n,L),X=typeof De.current=="function"?De.current(F):De.current,z=typeof Pe.current=="function"?Pe.current(F):Pe.current;return{mainAxis:X,crossAxis:z,alignmentAxis:z}},[typeof o!="function"?o:0,typeof r!="function"?r:0,L,n])],je=C==="none"&&b!=="shift",qe=!je&&(f||x||b==="shift"),Ue=b==="none"?null:Kn({...ge,padding:{top:p.top+E,right:p.right+E,bottom:p.bottom+E,left:p.left+E},mainAxis:!x&&b==="flip",crossAxis:C==="flip"?"alignment":!1,fallbackAxisSideDirection:I}),Je=je?null:Un(D=>{const F=Lt(D.elements.floating).documentElement;return{...ge,rootBoundary:x?{x:0,y:0,width:F.clientWidth,height:F.clientHeight}:void 0,mainAxis:C!=="none",crossAxis:qe,limiter:f||x?void 0:Jn(X=>{if(!Z.current)return{};const{width:z,height:ne}=Z.current.getBoundingClientRect(),ie=N(Y(X.placement)),we=ie==="y"?z:ne,Te=ie==="y"?p.left+p.right:p.top+p.bottom;return{offset:we/2+Te/2}})}},[ge,f,x,p,C]);b==="shift"||C==="shift"||s==="center"?he.push(Je,Ue):he.push(Ue,Je),he.push(Gn({...ge,apply({elements:{floating:D},rects:{reference:F},availableWidth:X,availableHeight:z}){Object.entries({"--available-width":`${X}px`,"--available-height":`${z}px`,"--anchor-width":`${F.width}px`,"--anchor-height":`${F.height}px`}).forEach(([ne,ie])=>{D.style.setProperty(ne,ie)})}}),ti(()=>({element:Z.current||document.createElement("div"),padding:l,offsetParent:"floating"}),[l]),{name:"transformOrigin",fn(D){var dt,mt,gt;const{elements:F,middlewareData:X,placement:z,rects:ne,y:ie}=D,we=Y(z),Te=N(we),oe=Z.current,_t=((dt=X.arrow)==null?void 0:dt.x)||0,Yt=((mt=X.arrow)==null?void 0:mt.y)||0,Nt=(oe==null?void 0:oe.clientWidth)||0,Xt=(oe==null?void 0:oe.clientHeight)||0,Fe=_t+Nt/2,ut=Yt+Xt/2,jt=Math.abs(((gt=X.shift)==null?void 0:gt.y)||0),qt=ne.reference.height/2,fe=typeof o=="function"?o(Ot(D,n,L)):o,Ut=jt>fe,Jt={top:`${Fe}px calc(100% + ${fe}px)`,bottom:`${Fe}px ${-fe}px`,left:`calc(100% + ${fe}px) ${ut}px`,right:`${-fe}px ${ut}px`}[we],Kt=`${Fe}px ${ne.reference.y+qt-ie}px`;return F.floating.style.setProperty("--transform-origin",qe&&Te==="y"&&Ut?Kt:Jt),{}}},ni,v),ue(()=>{!m&&d&&d.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[m,d]);const Le=A.useMemo(()=>({elementResize:!u&&typeof ResizeObserver<"u",layoutShift:!u&&typeof IntersectionObserver<"u"}),[u]),{refs:ee,elements:ce,x:Ke,y:Ge,middlewareData:te,update:pe,placement:Qe,context:Ze,isPositioned:le,floatingStyles:et}=Zn({rootContext:d,placement:k,middleware:he,strategy:i,whileElementsMounted:g?void 0:(...D)=>bt(...D,Le),nodeId:w,externalTree:y}),{sideX:tt,sideY:nt}=te.adaptiveOrigin||Re,Me=le?i:"fixed",it=A.useMemo(()=>v?{position:Me,[tt]:Ke,[nt]:Ge}:{position:Me,...et},[v,Me,tt,Ke,nt,Ge,et]),xe=A.useRef(null);ue(()=>{if(!m)return;const D=P.current,F=typeof D=="function"?D():D,z=(St(F)?F.current:F)||null||null;z!==xe.current&&(ee.setPositionReference(z),xe.current=z)},[m,ee,H,P]),A.useEffect(()=>{if(!m)return;const D=P.current;typeof D!="function"&&St(D)&&D.current!==xe.current&&(ee.setPositionReference(D.current),xe.current=D.current)},[m,ee,H,P]),A.useEffect(()=>{if(g&&m&&ce.domReference&&ce.floating)return bt(ce.domReference,ce.floating,pe,Le)},[g,m,ce,pe,Le]);const ae=Y(Qe),ot=zt(n,ae,L),st=re(Qe)||"center",rt=!!((at=te.hide)!=null&&at.referenceHidden);ue(()=>{R&&m&&le&&S(ae)},[R,m,le,ae]);const ct=A.useMemo(()=>{var D,F;return{position:"absolute",top:(D=te.arrow)==null?void 0:D.y,left:(F=te.arrow)==null?void 0:F.x}},[te.arrow]),lt=((ft=te.arrow)==null?void 0:ft.centerOffset)!==0;return A.useMemo(()=>({positionerStyles:it,arrowStyles:ct,arrowRef:Z,arrowUncentered:lt,side:ot,align:st,physicalSide:ae,anchorHidden:rt,refs:ee,context:Ze,isPositioned:le,update:pe}),[it,ct,Z,lt,ot,st,ae,rt,ee,Ze,le,pe])}function St(e){return e!=null&&"current"in e}function vi(e){return e==="starting"?fn:un}export{wi as a,vi as g,yi as u};
