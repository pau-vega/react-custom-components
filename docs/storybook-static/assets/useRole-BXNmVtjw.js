import{r as a}from"./index-Br2IOmUs.js";import{a as S}from"./useBaseUiId-Ds3dA0Bv.js";import{u as R}from"./useInteractions-DLoJm_bm.js";import{E as F}from"./empty-BwNtW-GQ.js";import{g as y}from"./element-vmEcGomw.js";const T=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function A(c,I={}){const n="rootStore"in c?c.rootStore:c,l=n.useState("open"),d=n.useState("floatingId"),u=n.useState("domReferenceElement"),m=n.useState("floatingElement"),{enabled:p=!0,role:o="dialog"}=I,E=S(),s=(u==null?void 0:u.id)||E,r=a.useMemo(()=>{var t;return((t=y(m))==null?void 0:t.id)||d},[m,d]),e=T.get(o)??o,f=R()!=null,i=a.useMemo(()=>e==="tooltip"||o==="label"?F:{"aria-haspopup":e==="alertdialog"?"dialog":e,"aria-expanded":"false",...e==="listbox"&&{role:"combobox"},...e==="menu"&&f&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[e,f,o]),b=a.useMemo(()=>e==="tooltip"||o==="label"?{[`aria-${o==="label"?"labelledby":"describedby"}`]:l?r:void 0}:{...i,"aria-expanded":l?"true":"false","aria-controls":l?r:void 0,...e==="menu"&&{id:s}},[e,r,l,s,o,i]),g=a.useMemo(()=>{const t={id:r,...e&&{role:e}};return e==="tooltip"||o==="label"?t:{...t,...e==="menu"&&{"aria-labelledby":s}}},[e,r,s,o]),x=a.useCallback(({active:t,selected:M})=>{const P={role:"option",...t&&{id:`${r}-fui-option`}};switch(o){case"select":case"combobox":return{...P,"aria-selected":M}}return{}},[r,o]);return a.useMemo(()=>p?{reference:b,floating:g,item:x,trigger:i}:{},[p,b,g,i,x])}export{A as u};
